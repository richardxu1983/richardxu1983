webpackJsonp([0],{"+E39":function(t,e,n){t.exports=!n("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+ZMJ":function(t,e,n){var i=n("lOnJ");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"+tPU":function(t,e,n){n("xGkn");for(var i=n("7KvD"),r=n("hJx8"),a=n("/bQp"),o=n("dSzd")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=i[c],f=l&&l.prototype;f&&!f[o]&&r(f,o,c),a[c]=a.Array}},"/bQp":function(t,e){t.exports={}},"/n6Q":function(t,e,n){n("zQR9"),n("+tPU"),t.exports=n("Kh4W").f("iterator")},"06OY":function(t,e,n){var i=n("3Eo+")("meta"),r=n("EqjI"),a=n("D2L2"),o=n("evD5").f,s=0,u=Object.isExtensible||function(){return!0},c=!n("S82l")(function(){return u(Object.preventExtensions({}))}),l=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!a(t,i)&&l(t),t}}},"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"2rjF":function(t,e,n){"use strict";var i=n("Zx67"),r=n.n(i),a=n("zwoO"),o=n.n(a),s=n("Pf15"),u=n.n(s),c=n("Zrlr"),l=n.n(c),f=n("wxAW"),d=n.n(f),p=n("wFRd").default.Fight,v=n("fxuB").default.wp,h=n("PKMK").default.FSKL,y=n("dwz5").default.npc,m=n("VGjY").default.item,g=n("dwz5").default.NG,k=function(){function t(){l()(this,t),this.attr={id:0,idx:0,head:"",name:"",type:0,weapon:0,hp:0,atkBase:0,mtkBase:0,defBase:0,spdBase:0,hpmaxBase:0,fskl:[-1,-1,-1],zf:[],tx:[],ng:[],cl:{type:-1,index:0},pos:{x:0,y:0,m:0},side:0,gold:0},this.cal={hpmax:0,atk:0,mtk:0,spd:0,def:0},this.ng={atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ft={round:0,eff:[],atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ftOn=!1}return d()(t,[{key:"ftInit",value:function(){this.ft.atk=0,this.ft.mtk=0,this.ft.spd=0,this.ft.def=0,this.ft.atkp=0,this.ft.mtkp=0,this.ft.spdp=0,this.ft.defp=0}},{key:"idx",value:function(t){if(void 0==t)return this.getAttr("idx");this.setAttr("idx",t)}},{key:"gold",value:function(t){if(void 0==t)return this.getAttr("gold");this.setAttr("gold",t)}},{key:"id",value:function(t){if(void 0==t)return this.getAttr("id");this.setAttr("id",t)}},{key:"side",value:function(t){if(void 0==t)return this.getAttr("side");this.setAttr("side",t)}},{key:"type",value:function(t){if(void 0==t)return this.getAttr("type");this.setAttr("type",t)}},{key:"weapon",value:function(t){if(void 0==t)return this.getAttr("weapon");this.setAttr("weapon",t)}},{key:"head",value:function(t){if(void 0==t)return this.getAttr("head");this.setAttr("head",t)}},{key:"hp",value:function(t){if(void 0==t)return this.getAttr("hp");this.setAttr("hp",t)}},{key:"name",value:function(t){if(void 0==t)return this.getAttr("name");this.setAttr("name",t)}},{key:"pos",value:function(t){if(!t)return this.getAttr("pos");this.attr.pos.x=t.x,this.attr.pos.y=t.y}},{key:"moveTo",value:function(t,e){var i=n("GPv1").default.mapCtrl,r=i.addUnitToPos(t,e,this);if(-1!=r){var a=this.attr.pos.m,o=this.attr.pos.x,s=this.attr.pos.y;i.delUnitAtByIdx(o,s,a),this.pos({x:t,y:e}),this.attr.pos.m=r}}},{key:"setPos",value:function(t,e){var i=n("GPv1").default.mapCtrl.addUnitToPos(t,e,this);this.pos({x:t,y:e}),this.attr.pos.m=i}},{key:"fskl",value:function(){return this.getAttr("fskl")}},{key:"attrCheck",value:function(){var t=this.attr.atkBase,e=this.attr.mtkBase,n=this.attr.hpmaxBase,i=this.attr.spdBase,r=this.attr.defBase;t+=v[this.weapon()].atk,t+=this.ng.atk,e+=this.ng.mtk,i+=this.ng.spd,r+=this.ng.def,t*=1+this.ng.atkp/100,e*=1+this.ng.mtkp/100,i*=1+this.ng.spdp/100,r*=1+this.ng.defp/100,this.ftOn&&(t+=this.ft.atk,e+=this.ft.mtk,i+=this.ft.spd,r+=this.ft.def,t*=1+this.ft.atkp/100,e*=1+this.ft.mtkp/100,i*=1+this.ft.spdp/100,r*=1+this.ft.defp/100),this.setCal("atk",t),this.setCal("mtk",e),this.setCal("hpmax",n),this.setCal("spd",i),this.setCal("def",r)}},{key:"addToFtByIdx",value:function(t){if(void 0!=this.attr.zf[t])for(var e=0;e<3;e++)if(this.attr.fskl[e]<0)return void(this.attr.fskl[e]=t)}},{key:"addToFtByIdxPos",value:function(t,e){for(var n=0;n<3;n++)this.attr.fskl[n]==t&&e!=n&&(this.attr.fskl[n]=-1);this.attr.fskl[e]=t}},{key:"addToFtById",value:function(t){if(h[t]){var e=this.attr.zf.length;if(!(e<1))for(var n=-1,i=0;i<e;i++)if(this.attr.zf[i].id==t){n=i;for(var r=0;r<3;r++)if(this.attr.fskl[r]<0)return void(this.attr.fskl[r]=n)}}}},{key:"delFtByIdx",value:function(t){this.attr.fskl[t]=-1}},{key:"delFtByPos",value:function(t){this.attr.fskl[t-1]=-1}},{key:"absorbJS",value:function(t){var e=m[t];if(e){var n=e.data1;if(0==n){var i=e.data2;return this.findNg(i)>=0?-1:(this.addNg(i),1)}if(1==n){i=e.data2;return this.findZf(i)>=0?-1:(this.addZf(i),1)}}return-1}},{key:"findNg",value:function(t){var e=this.attr.ng.length,n=0;for(n=0;n<e;n++)if(this.attr.ng[n].id==t)return n;return-1}},{key:"findZf",value:function(t){var e=this.attr.zf.length,n=0;for(n=0;n<e;n++)if(this.attr.zf[n].id==t)return n;return-1}},{key:"addZf",value:function(t){this.findZf(t)>=0||this.attr.zf.length>=20||this.attr.zf.push({id:t,lv:1,study:0})}},{key:"addNg",value:function(t){this.findNg(t)>=0||this.attr.ng.length>=32||(this.attr.ng.push({id:t,lv:1,study:0}),this.ngRecal(),this.attrCheck())}},{key:"ngInit",value:function(){var t;for(t in this.ng)this.ng[t]=0}},{key:"ngAddLv",value:function(t){var e=this.findNg(t);if(e>=0){var n=this.attr.ng[e];return n.lv++,n.study=0,this.ngRecal(),this.attrCheck(),n.lv}return-1}},{key:"zfAddLv",value:function(t){var e=this.findZf(t);if(e>=0){var n=this.attr.zf[e];return n.lv++,n.study=0,n.lv}return-1}},{key:"ngRecal",value:function(){var t=this.attr.ng.length;if(!(t<=0)){this.ngInit();var e,n,i,r,a,o=0,s=0;for(o=0;o<t;o++)for(a in n=(e=this.attr.ng[o]).id,i=e.lv,r=JSON.parse(g[n].attr),s=(i-1)*g[n].add,r)this.ng[a]+=r[a],this.ng[a]+=s}}},{key:"onMonthStep",value:function(){var t=this.attr.cl;if(0==t.type){var e=t.index,n=this.attr.ng[e];n.study++;var i=n.lv,r=n.id,a=g[r].lb,o=g[r].lbp,s=Math.ceil(a+Math.pow(o,i));n.study>=s&&this.ngAddLv(r)}if(1==t.type){e=t.index;var u=this.attr.zf[e];u.study++;i=u.lv,r=u.id,a=h[r].lb,o=h[r].lbp,s=Math.ceil(a+Math.pow(o,i));u.study>=s&&this.zfAddLv(r)}}},{key:"changeStudy",value:function(t,e){this.attr.cl.index=e,this.attr.cl.type=t}},{key:"getAttr",value:function(t){return this.attr[t]}},{key:"setAttr",value:function(t,e){this.attr[t]=e,this.onSetAttr(t,e)}},{key:"getCal",value:function(t){return this.cal[t]}},{key:"setCal",value:function(t,e){this.cal[t]=e,this.onSetcal(t,e)}},{key:"atkDis",value:function(){return v[this.weapon()].atkDis}},{key:"atk",value:function(){return this.getCal("atk")}},{key:"mtk",value:function(){return this.getCal("mtk")}},{key:"def",value:function(){return this.getCal("def")}},{key:"spd",value:function(){return this.getCal("spd")}},{key:"hpmax",value:function(){return this.getCal("hpmax")}},{key:"damage",value:function(t){var e=this.hp();return(e-=t)<=0?(this.hp(0),-1):(this.hp(e),1)}},{key:"addAttr",value:function(t,e){var n=this.getAttr(t)+e;this.setAttr(t,n)}},{key:"equipWp",value:function(t){0==p.over&&(this.setAttr("weapon",t),this.attrCheck(),this.onEqWp(t))}},{key:"unEquipWp",value:function(){0==p.over&&(this.setAttr("weapon",0),this.attrCheck(),this.onEqWp(0))}},{key:"onEqWp",value:function(t){}},{key:"onUnEqWp",value:function(){}},{key:"onSetAttr",value:function(t,e){}},{key:"onSetcal",value:function(t,e){}}]),t}(),_=function(t){function e(t,n){l()(this,e);var i=o()(this,(e.__proto__||r()(e)).call(this));return i.id(t),i.weapon(n),i.attrInit(),i.attrCheck(),i.name(y[t].name),i}return u()(e,t),d()(e,[{key:"attrInit",value:function(){var t=this.id(),e=y[t].attr,n=e.hp,i=e.atk,r=e.mtk,a=e.def,o=e.spd;this.setAttr("hp",n),this.setAttr("hpmaxBase",n),this.setAttr("atkBase",i),this.setAttr("mtkBase",r),this.setAttr("spdBase",o),this.setAttr("defBase",a)}}]),e}(k),b={npcName:function(t){return y[t].name}};e.a={Unit:k,Npc:_,unitCtrl:b}},"3Eo+":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},"40Tq":function(t,e){},"4mcu":function(t,e){t.exports=function(){}},"52gC":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"5QVw":function(t,e,n){t.exports={default:n("BwfY"),__esModule:!0}},"77Pl":function(t,e,n){var i=n("EqjI");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},"7KvD":function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"7UMu":function(t,e,n){var i=n("R9M2");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"880/":function(t,e,n){t.exports=n("hJx8")},"94VQ":function(t,e,n){"use strict";var i=n("Yobk"),r=n("X8DO"),a=n("e6n0"),o={};n("hJx8")(o,n("dSzd")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},"9bBU":function(t,e,n){n("mClu");var i=n("FeBl").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},B3SJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),r=n.n(i),a={day:1,year:1,month:1},o=n("birc").default.role,s=n("iPAz").default.propCtrl,u={init:function(){a.day=1,a.year=1,a.month=1},remain:function(){return 31-a.day},act:function(t){return!(a.day+t>31)&&(a.day+=t,!0)},getTick:function(){return 12*a.year+a.month},addMonth:function(t){a.month=a.month+t,Math.floor(a.month/12)>0&&(a.month=1,a.year=a.year+1),a.day=1,s.month(),o.onMonthStep()},load:function(){try{var t=JSON.parse(localStorage.gameTime);t&&(a.day=t.day,a.hour=t.hour)}catch(t){u.init()}},new:function(){u.init()},save:function(){localStorage.gameTime=r()(a)}};e.default={gtime:u,gT:a}},BwfY:function(t,e,n){n("fWfb"),n("M6a0"),n("OYls"),n("QWe/"),t.exports=n("FeBl").Symbol},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},CFzG:function(t,e){},D2L2:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},EGZi:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},EqjI:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},FeBl:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},GPv1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),a=n("wxAW"),o=n.n(a),s=n("birc").default.role,u=n("e2vB").default.tileType,c=n("B3SJ").default.gtime,l=n("pOLX").default.construct,f=n("pOLX").default.names,d=n("hjqR").default.conCtrl,p=[],v=50,h=9,y=7,m=(h+1)/2,g=(y+1)/2,k=55,_=175,b=60,x=function(){function t(e){r()(this,t),this.data={},this.data.x=e.x,this.data.y=e.y,this.data.type=e.type,this.data.units=[],this.data.lv=1,this.data.ownBy=0,this.data.in=0,this.data.idx=e.x*v+e.y,this.data.con=-1,this.data.captureAt=-1}return o()(t,[{key:"addUnit",value:function(t){return this.data.units.push(t)-1}},{key:"delUnitByIdx",value:function(t){this.data.units.splice(t,1)}},{key:"captureByUnit",value:function(t){var e=t.side();e!=this.data.ownBy&&(e!=this.data.in&&-1==this.data.captureAt&&(this.data.captureAt=c.getTick()),this.data.ownBy=e,T.renderBorderPos(this.data.x,this.data.y))}},{key:"inBySide",value:function(t){this.data.in=t,t==this.data.ownBy&&-1!=this.data.captureAt&&(this.data.captureAt=-1)}}]),t}(),w=function(){function t(){r()(this,t),this.cutPos={x:0,y:0},this.cutSel={x:-1,y:-1,i:-1,j:-1},this.lastSel={x:-1,y:-1,i:-1,j:-1},this.showBorder=!1}return o()(t,[{key:"getMax",value:function(){return v}},{key:"new",value:function(){}},{key:"load",value:function(){}},{key:"getCutPos",value:function(){return this.cutPos}},{key:"setCutPos",value:function(t,e){this.cutPos.x=t,this.cutPos.y=e}},{key:"getMapByPos",value:function(t,e){return p[t*v+e]}},{key:"insertMap",value:function(t){p[t.data.idx]=t}},{key:"genMapAtPos",value:function(t,e,n){var i=Math.random(),r=new x({x:t,y:e,type:i>.15?0:2});p[r.data.idx]=r}},{key:"addUnitToPos",value:function(t,e,n){var i=this.getMapByPos(t,e);return void 0==i?-1:i.addUnit(n.idx())}},{key:"delUnitAtByIdx",value:function(t,e,n){this.getMapByPos(t,e).delUnitByIdx(n)}},{key:"genMapArea",value:function(t,e,n){for(var i=t-n;i<=t+n;i++)for(var r=e-n;r<=e+n;r++)this.genMapAtPos(i,r,0)}},{key:"capturePosByUnit",value:function(t,e,n){this.getMapByPos(t,e).captureByUnit(n)}},{key:"createEl",value:function(){!function(){for(var t=document.getElementById("maps"),e=function(e){for(var n=function(n){var i=e*b+_,r=(y-n-1)*b+k,a=document.createElement("div"),o=document.createElement("img"),s=document.createElement("img"),u=document.createElement("div");o.id="tile_img_"+e+"_"+n,o.src="",o.classList.add("mapTile"),s.id="tile_build_"+e+"_"+n,s.src="",s.classList.add("mapTileNo"),u.id="border_"+e+"_"+n,u.classList.add("border"),u.style.opacity="0.5",a.appendChild(o),a.appendChild(u),a.appendChild(s),a.classList.add("map"),a.id="tile_"+e+"_"+n,a.style.top=r+"px",a.style.left=i+"px",a.addEventListener("click",function(){T.onLeftClickTile(e,n)}),t.appendChild(a)},i=0;i<y;i++)n(i)},n=0;n<h;n++)e(n)}(),function(){document.getElementById("mapAct");L("显示边界","explore",C,!1),L("攻占","conquer",z,!0),L("买地","buy",S,!0),L("查看/建设","build",B,!0),L("前往","move",O,!0)}(),this.render()}},{key:"render",value:function(){this.renderTile(),this.reanderPly()}},{key:"getTileByPos",value:function(t,e){var n=t-(this.cutPos.x-m+1),i=e-(this.cutPos.y-g+1);return document.getElementById("tile_"+n+"_"+i)}},{key:"getBorderByPos",value:function(t,e){var n=t-(this.cutPos.x-m+1),i=e-(this.cutPos.y-g+1);return document.getElementById("border_"+n+"_"+i)}},{key:"renderBorderPos",value:function(t,e){if(this.inRange(t,e)){var n=this.getBorderByPos(t,e);if(n)if(0!=this.showBorder){n.style.visibility="visible";var i=this.getMapByPos(t,e),r=i.data.in;if(n.style.backgroundColor="",i.data.ownBy==s.side()&&(n.style.backgroundColor="green"),this.inRange(t,e+1))if(this.getMapByPos(t,e+1).data.in==r)n.style.borderTop="",this.getBorderByPos(t,e+1).style.borderBottom="";else this.renderSgB("borderTop",r,n);else this.renderSgB("borderTop",r,n);if(this.inRange(t,e-1))if(this.getMapByPos(t,e-1).data.in==r)n.style.borderBottom="",this.getBorderByPos(t,e-1).style.borderTop="";else this.renderSgB("borderBottom",r,n);else this.renderSgB("borderBottom",r,n);if(this.inRange(t+1,e))if(this.getMapByPos(t+1,e).data.in==r)n.style.borderRight="",this.getBorderByPos(t+1,e).style.borderLeft="";else this.renderSgB("borderRight",r,n);else this.renderSgB("borderRight",r,n);if(this.inRange(t-1,e))if(this.getMapByPos(t-1,e).data.in==r)n.style.borderLeft="",this.getBorderByPos(t-1,e).style.borderRight="";else this.renderSgB("borderLeft",r,n);else this.renderSgB("borderLeft",r,n)}else n.style.visibility="hidden"}}},{key:"renderSgB",value:function(t,e,n){e==s.side()?n.style[t]="1px solid #3CB371":n.style[t]=0==e?"":"1px solid red"}},{key:"renderTile",value:function(){for(var t,e,n,i=this.cutPos.x-m+1,r=this.cutPos.y-g+1,a=0;a<h;a++)for(var o=0;o<y;o++)t=i+a,e=r+o,n=this.getMapByPos(t,e).data.type,document.getElementById("tile_img_"+a+"_"+o).src="/static/img/mlGame/tile_"+u[n].img+".png",this.renderBuildPos(t,e),this.renderBorderPos(t,e)}},{key:"renderBuildPos",value:function(t,e){var n=this.getMapByPos(t,e).data.con,i=t-(this.cutPos.x-m+1),r=e-(this.cutPos.y-g+1),a=document.getElementById("tile_build_"+i+"_"+r);if(-1==n)a.src="",a.style.visibility="hidden";else{var o=d.getConByIdx(n).data.id,s=l[o].img;a.src="/static/img/mlGame/"+s+".png",a.style.visibility="visible"}}},{key:"inMap",value:function(t,e){return!(t<0||e<0||t>=v||e>=v)}},{key:"inRange",value:function(t,e){if(t<0||e<0||t>=v||e>=v)return!1;var n=this.cutPos.x-m+1,i=this.cutPos.y-g+1;return t>=n&&t<=n+(h-1)&&e>=i&&e<=i+(y-1)}},{key:"renderBorder",value:function(){for(var t=this.cutPos.x-m+1,e=this.cutPos.y-g+1,n=void 0,i=void 0,r=0;r<h;r++)for(var a=0;a<y;a++)n=t+r,i=e+a,this.renderBorderPos(n,i)}},{key:"reanderPly",value:function(){var t=s.pos().x,e=s.pos().y,n=this.cutPos.x-m+1,i=this.cutPos.y-g+1;if(t>=n&&t<=n+(h-1)&&e>=i&&e<=i+(y-1)){var r=t-n,a=e-i,o=document.getElementById("tile_"+r+"_"+a),u=o.offsetLeft+10,c=o.offsetTop+10,l=document.getElementById("flag");l.style.position="absolute",l.style.top=c+"px",l.style.left=u+"px"}}},{key:"setCutSel",value:function(t,e,n,i){var r=n||t-(this.cutPos.x-m+1),a=i||e-(this.cutPos.y-g+1);this.lastSel.x=this.cutSel.x,this.lastSel.y=this.cutSel.y,this.lastSel.i=this.cutSel.i,this.lastSel.j=this.cutSel.j,this.cutSel.x=t,this.cutSel.y=e,this.cutSel.i=r,this.cutSel.j=a}},{key:"onLeftClickTile",value:function(t,e){var n=this.cutPos.x-m+1+t,i=this.cutPos.y-g+1+e,r=s.pos().x,a=s.pos().y;this.setCutSel(n,i,t,e),document.getElementById("move").disabled=Math.abs(n-r)+Math.abs(i-a)!=1,A(),I()}}]),t}();function B(){var t=document.getElementById("construct"),e=document.createElement("div");e.classList.add("desc"),e.innerText=function(){var t="",e=T.cutSel.x,n=T.cutSel.y,i=T.getMapByPos(e,n),r=i.data.con,a=i.data.type,o=i.data.ownBy;if(t=u[a].desc,-1==r)t+="目前还没有被建设。";else{var c=d.getConByIdx(r).data.id;t+="这里被建设为了【"+l[c].name+"】。"}return o==s.side()?t+="这块领土属于您。":t+=0==o?"这里没有被占领，这里住着一些山野之人和强盗土匪。":"已被占领。",t}(),t.appendChild(e);var n=T.cutSel.x,i=T.cutSel.y,r=T.getMapByPos(n,i),a=r.data.ownBy,o=r.data.con;if(a==s.side()&&-1==o)for(var c=r.data.type,f=l.length,p=void 0,v=function(e){p=l[e];var n=document.createElement("div");n.innerText="-> 建设 【"+p.name+"】（"+p.need+"，建设资金："+p.gold+"） \n （"+p.desc+"）",n.style.top=7+3.5*e+"em",c!=p.area||s.gold()<p.gold?(n.classList.add("selno"),n.style.color="gray"):(n.classList.add("sel"),n.style.color="black",n.addEventListener("click",function(){!function(t){var e=l[t],n=T.cutSel.x,i=T.cutSel.y,r=T.getMapByPos(n,i);if(1!=r.data.ownBy)return;if(-1!=r.data.con)return;if(r.data.type!=e.area||s.gold()<e.gold)return;d.BuildCon(n,i,t,s.side()),T.inRange(n,i)&&T.renderBuildPos(n,i)}(e),P()})),t.appendChild(n)},h=0;h<f;h++)v(h);var y=document.createElement("button");y.classList.add("close"),y.innerText="关闭",y.addEventListener("click",function(){P()}),t.appendChild(y),t.style.visibility="visible"}function P(){var t=document.getElementById("construct");t.innerHTML="",t.style.visibility="hidden"}function C(){T.showBorder?(T.showBorder=!1,document.getElementById("explore").innerText="显示边界"):(T.showBorder=!0,document.getElementById("explore").innerText="隐藏边界");for(var t=T.cutPos.x-m+1,e=T.cutPos.y-g+1,n=void 0,i=void 0,r=0;r<h;r++)for(var a=0;a<y;a++)n=t+r,i=e+a,T.renderBorderPos(n,i)}function S(){}function M(t,e,n){if(c.act(n)){var i=s.pos().x,r=s.pos().y;if(!(t<0||e<0||t>=v||e>=v)&&Math.abs(t-i)+Math.abs(e-r)==1){var a=t-(T.cutPos.x-m+1),o=e-(T.cutPos.y-g+1);s.moveTo(t,e),0==a&&t>=0?(T.cutPos.x--,T.render()):a==h-1&&t<v?(T.cutPos.x++,T.render()):0==o&&e>=0?(T.cutPos.y--,T.render()):o==y-1&&e<v?(T.cutPos.y++,T.render()):T.reanderPly(),document.getElementById("move").disabled=!0,A(),I()}}}function O(){M(T.cutSel.x,T.cutSel.y,1)}function E(t,e){M(t+s.pos().x,e+s.pos().y,1)}function z(){var t=T.cutSel.x,e=T.cutSel.y,n=s.pos().x,i=s.pos().y;T.getMapByPos(t,e);(t==n&&e==i||t==n&&i==e||Math.abs(t-n)<=1&&Math.abs(e-i)<=1)&&(1!=T.getMapByPos(t,e).data.ownBy&&T.capturePosByUnit(t,e,s),A(),I())}function A(){var t=T.cutSel.x,e=T.cutSel.y,n=s.pos().x,i=s.pos().y,r=T.getMapByPos(t,e).data.ownBy;document.getElementById("buy").disabled=r==s.side()||!(t==n&&i==e||Math.abs(t-n)<=1&&Math.abs(e-i)<=1),document.getElementById("build").disabled=!1,document.getElementById("conquer").disabled=r==s.side()||!(t==n&&i==e||Math.abs(t-n)<=1&&Math.abs(e-i)<=1)}function I(){var t=T.cutSel.x,e=T.cutSel.y;if(T.inRange(t,e)){var n=t-(T.cutPos.x-m+1),i=e-(T.cutPos.y-g+1);t==T.lastSel.x&&e==T.lastSel.y||T.renderBorderPos(T.lastSel.x,T.lastSel.y),document.getElementById("border_"+n+"_"+i).style.border="1px solid #EEE685",function(){var t=document.getElementById("mapInfo"),e=T.cutSel.x,n=T.cutSel.y,i=T.getMapByPos(e,n),r=i.data.type,a=i.data.ownBy,o=i.data.lv,c=i.data.con,p=void 0,v=void 0,h=void 0;-1!=c?(v=(p=d.getConByIdx(i.data.con)).data.id,h="【"+l[v].name+"】"):h=u[r].name,u[r].showLv&&(t.innerText=o+"级"),t.innerText=h+"( "+e+","+n+" )",a==s.side()?(-1!=c&&2==l[v].type&&(t.innerText=t.innerText+" , 劳工("+p.data.num1+"/"+l[v].work.worker+") , "+f[l[v].work.type]+"+"+Math.ceil(p.data.num1/l[v].work.worker*l[v].work.max)),t.innerText=t.innerText+"，领土属于您"):t.innerText=0==a?t.innerText+"，无主":t.innerText+"，被占"}()}}function L(t,e,n,i){var r=document.getElementById("mapAct"),a=document.createElement("button");a.classList.add("mapActBtn"),a.innerText=t,a.id=e,a.disabled=i,a.addEventListener("click",function(){n()}),r.appendChild(a)}document.onkeyup=function(t){switch((t=t||window.event).preventDefault(),t.keyCode){case 37:E(-1,0);break;case 38:E(0,1);break;case 39:E(1,0);break;case 40:E(0,-1)}},document.ondblclick=function(){O()};var T=new w;e.default={mapCtrl:T,mapUI:{guihua:!1},maps:p}},Hew6:function(t,e){},Ibhu:function(t,e,n){var i=n("D2L2"),r=n("TcQ7"),a=n("vFc/")(!1),o=n("ax3d")("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,c=[];for(n in s)n!=o&&i(s,n)&&c.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},Kh4W:function(t,e,n){e.f=n("dSzd")},Kh5d:function(t,e,n){var i=n("sB3e"),r=n("PzxK");n("uqUo")("getPrototypeOf",function(){return function(t){return r(i(t))}})},LKZe:function(t,e,n){var i=n("NpIQ"),r=n("X8DO"),a=n("TcQ7"),o=n("MmMw"),s=n("D2L2"),u=n("SfB7"),c=Object.getOwnPropertyDescriptor;e.f=n("+E39")?c:function(t,e){if(t=a(t),e=o(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},M6a0:function(t,e){},MU5D:function(t,e,n){var i=n("R9M2");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},MmMw:function(t,e,n){var i=n("EqjI");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},O4g8:function(t,e){t.exports=!0},ON07:function(t,e,n){var i=n("EqjI"),r=n("7KvD").document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},OYls:function(t,e,n){n("crlp")("asyncIterator")},OvRC:function(t,e,n){t.exports={default:n("oM7Q"),__esModule:!0}},PKMK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={FSKL:[{id:0,name:"重击",icon:"01",desc:"对敌军单体发动一次强力的攻击（伤害率<>）和一次仙法攻击（伤害率<>，受仙法影响），2次攻击独立计算",base:"100<>90","":"4<>4",lb:1,lbp:1.5,maxLvl:10,type:1,eff:"[0,2]",prob:.8,probAdd:.015,target:2,range:2},{id:1,name:"鼓舞",icon:"01",desc:"鼓舞士气，持续3回合",base:"","":"",lb:1,lbp:1.5,maxLvl:10,type:0,eff:"[1]",prob:0,probAdd:0,target:1,range:2}],FSC:[{id:0,name:"重击",target:2,range:2,targetNum:1,eff:"[]",src:"atk",numType:0,basic:2,add:.04},{id:1,name:"鼓舞",target:1,range:2,targetNum:2,eff:"[0]",src:0,numType:0,basic:0,add:0},{id:2,name:"重击",target:2,range:2,targetNum:1,eff:"[]",src:"mtk",numType:1,basic:3.5,add:.04}],EFF:[{id:0,name:"鼓舞",round:2,attr:"atkp",base:10,psrc:4,source:"mtk",badd:3,padd:3}]}},Pf15:function(t,e,n){"use strict";e.__esModule=!0;var i=o(n("kiBT")),r=o(n("OvRC")),a=o(n("pFYg"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},PzxK:function(t,e,n){var i=n("D2L2"),r=n("sB3e"),a=n("ax3d")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},QRG4:function(t,e,n){var i=n("UuGF"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"QWe/":function(t,e,n){n("crlp")("observable")},R3U4:function(t,e){},R9M2:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},RPLV:function(t,e,n){var i=n("7KvD").document;t.exports=i&&i.documentElement},Rrel:function(t,e,n){var i=n("TcQ7"),r=n("n0T6").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}},S82l:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SfB7:function(t,e,n){t.exports=!n("+E39")&&!n("S82l")(function(){return 7!=Object.defineProperty(n("ON07")("div"),"a",{get:function(){return 7}}).a})},TcQ7:function(t,e,n){var i=n("MU5D"),r=n("52gC");t.exports=function(t){return i(r(t))}},UuGF:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},V2ZU:function(t,e){},VGjY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={item:[{id:0,name:"金刚经",icon:"01",desc:"学习金刚心法",use:1,type:0,sub:0,stack:20,time:2,data1:0,data2:0},{id:1,name:"重击",icon:"01",desc:"重击",use:1,type:0,sub:0,stack:20,time:2,data1:1,data2:0}]}},X8DO:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XIw1:function(t,e,n){"use strict";e.a={fightRecord:{log:""}}},Xc4G:function(t,e,n){var i=n("lktj"),r=n("1kS7"),a=n("NpIQ");t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),u=a.f,c=0;s.length>c;)u.call(t,o=s[c++])&&e.push(o);return e}},Yobk:function(t,e,n){var i=n("77Pl"),r=n("qio6"),a=n("xnc9"),o=n("ax3d")("IE_PROTO"),s=function(){},u=function(){var t,e=n("ON07")("iframe"),i=a.length;for(e.style.display="none",n("RPLV").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[a[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},ZaQb:function(t,e,n){var i=n("EqjI"),r=n("77Pl"),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n("+ZMJ")(Function.call,n("LKZe").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},Zx67:function(t,e,n){t.exports={default:n("fS6E"),__esModule:!0}},Zzip:function(t,e,n){t.exports={default:n("/n6Q"),__esModule:!0}},ax3d:function(t,e,n){var i=n("e8AB")("keys"),r=n("3Eo+");t.exports=function(t){return i[t]||(i[t]=r(t))}},birc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),r=n.n(i),a=n("Zx67"),o=n.n(a),s=n("Zrlr"),u=n.n(s),c=n("wxAW"),l=n.n(c),f=n("zwoO"),d=n.n(f),p=n("Pf15"),v=n.n(p),h=n("2rjF"),y=n("uXnN"),m=n("VGjY"),g=h.a.Unit,_=y.default.role,b=m.default.item,x=new(function(t){function e(){u()(this,e);var t=d()(this,(e.__proto__||o()(e)).call(this));return t.attr.bag=[],t.setAttr("type",99),t}return v()(e,t),l()(e,[{key:"bag",value:function(){return this.attr.bag}},{key:"gold",value:function(t){var e=n("iPAz").default.propCtrl,i=this.side();return e.get(i).gold()}},{key:"bagAddItem",value:function(t){var e,n,i=this.attr.bag.length,r=0;for(r=0;r<i;r++)if((e=this.attr.bag[r])&&(n=e.id)==t&&b[n].stack>e.stack)return void e.stack++;this.attr.bag.length>=64||this.attr.bag.push({id:t,stack:1})}},{key:"bagDelItem",value:function(t){this.attr.bag[t].stack>1?this.attr.bag[t].stack--:this.attr.bag.splice(t,1)}},{key:"bagUseItem",value:function(t){var e=this.attr.bag[t];if(e){var n=b[e.id];if(0==n.use)return;0==n.type&&0==n.sub&&1==this.absorbJS(e.id)&&this.bagDelItem(t)}}},{key:"new",value:function(){var t=_.new.hp,e=_.new.atkBase,n=_.new.mtkBase,i=_.new.spdBase,r=_.new.defBase;this.setAttr("hp",t),this.setAttr("hpmaxBase",t),this.setAttr("atkBase",e),this.setAttr("mtkBase",n),this.setAttr("spdBase",i),this.setAttr("defBase",r),this.name(_.new.name),this.setAttr("fskl",[-1,-1,-1]),this.setAttr("zf",[]),this.setAttr("tx",[]),this.setAttr("ng",[]),this.setAttr("bag",[]),this.setAttr("side",1),this.attr.cl={type:-1,index:0},this.ng={atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ft={round:0,eff:[],atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ftOn=!1,this.attrCheck()}},{key:"save",value:function(){localStorage.role=r()(this.attr)}},{key:"load",value:function(){try{var t=JSON.parse(localStorage.kc);k&&(this.attr=t)}catch(t){this.new()}this.attrCheck()}}]),e}(g));e.default={role:x,ui:{pnl:!1}}},crlp:function(t,e,n){var i=n("7KvD"),r=n("FeBl"),a=n("O4g8"),o=n("Kh4W"),s=n("evD5").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},dSzd:function(t,e,n){var i=n("e8AB")("wks"),r=n("3Eo+"),a=n("7KvD").Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},dwz5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={NG:[{id:0,name:"金刚心法",icon:"01",desc:"金刚心法",lb:3,lbp:1.5,eff:0,max:10,add:1,attr:'{"atk":1}'}]}},e2vB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[];i[0]=[],i[0][0]={tile:"00"},i[1]=[],i[1][0]={tile:"10"},i[2]=[],i[2][0]={tile:"20"},i[2][1]={tile:"21"},e.default={tileType:[{id:0,name:"平原",desc:"这是一片平原。",enter:!0,maxLv:1,showLv:!1,img:"00"},{id:1,name:"山脉",desc:"这是一片山脉，不可同行和建设。",enter:!1,maxLv:1,showLv:!1,img:"01"},{id:2,name:"树林",desc:"这是一片树林，如果建设了林站，可以产出木材和其它少量材料。",enter:!0,maxLv:2,showLv:!0,img:"02"}],mapTile:i}},e6n0:function(t,e,n){var i=n("evD5").f,r=n("D2L2"),a=n("dSzd")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},e8AB:function(t,e,n){var i=n("FeBl"),r=n("7KvD"),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("O4g8")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},evD5:function(t,e,n){var i=n("77Pl"),r=n("SfB7"),a=n("MmMw"),o=Object.defineProperty;e.f=n("+E39")?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},exh5:function(t,e,n){var i=n("kM2E");i(i.S,"Object",{setPrototypeOf:n("ZaQb").set})},fS6E:function(t,e,n){n("Kh5d"),t.exports=n("FeBl").Object.getPrototypeOf},fWfb:function(t,e,n){"use strict";var i=n("7KvD"),r=n("D2L2"),a=n("+E39"),o=n("kM2E"),s=n("880/"),u=n("06OY").KEY,c=n("S82l"),l=n("e8AB"),f=n("e6n0"),d=n("3Eo+"),p=n("dSzd"),v=n("Kh4W"),h=n("crlp"),y=n("Xc4G"),m=n("7UMu"),g=n("77Pl"),k=n("EqjI"),_=n("TcQ7"),b=n("MmMw"),x=n("X8DO"),w=n("Yobk"),B=n("Rrel"),P=n("LKZe"),C=n("evD5"),S=n("lktj"),M=P.f,O=C.f,E=B.f,z=i.Symbol,A=i.JSON,I=A&&A.stringify,L=p("_hidden"),T=p("toPrimitive"),j={}.propertyIsEnumerable,F=l("symbol-registry"),N=l("symbols"),R=l("op-symbols"),D=Object.prototype,G="function"==typeof z,U=i.QObject,W=!U||!U.prototype||!U.prototype.findChild,K=a&&c(function(){return 7!=w(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(D,e);i&&delete D[e],O(t,e,n),i&&t!==D&&O(D,e,i)}:O,Q=function(t){var e=N[t]=w(z.prototype);return e._k=t,e},q=G&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof z},V=function(t,e,n){return t===D&&V(R,e,n),g(t),e=b(e,!0),g(n),r(N,e)?(n.enumerable?(r(t,L)&&t[L][e]&&(t[L][e]=!1),n=w(n,{enumerable:x(0,!1)})):(r(t,L)||O(t,L,x(1,{})),t[L][e]=!0),K(t,e,n)):O(t,e,n)},J=function(t,e){g(t);for(var n,i=y(e=_(e)),r=0,a=i.length;a>r;)V(t,n=i[r++],e[n]);return t},Z=function(t){var e=j.call(this,t=b(t,!0));return!(this===D&&r(N,t)&&!r(R,t))&&(!(e||!r(this,t)||!r(N,t)||r(this,L)&&this[L][t])||e)},X=function(t,e){if(t=_(t),e=b(e,!0),t!==D||!r(N,e)||r(R,e)){var n=M(t,e);return!n||!r(N,e)||r(t,L)&&t[L][e]||(n.enumerable=!0),n}},Y=function(t){for(var e,n=E(_(t)),i=[],a=0;n.length>a;)r(N,e=n[a++])||e==L||e==u||i.push(e);return i},H=function(t){for(var e,n=t===D,i=E(n?R:_(t)),a=[],o=0;i.length>o;)!r(N,e=i[o++])||n&&!r(D,e)||a.push(N[e]);return a};G||(s((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===D&&e.call(R,n),r(this,L)&&r(this[L],t)&&(this[L][t]=!1),K(this,t,x(1,n))};return a&&W&&K(D,t,{configurable:!0,set:e}),Q(t)}).prototype,"toString",function(){return this._k}),P.f=X,C.f=V,n("n0T6").f=B.f=Y,n("NpIQ").f=Z,n("1kS7").f=H,a&&!n("O4g8")&&s(D,"propertyIsEnumerable",Z,!0),v.f=function(t){return Q(p(t))}),o(o.G+o.W+o.F*!G,{Symbol:z});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=S(p.store),nt=0;et.length>nt;)h(et[nt++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return r(F,t+="")?F[t]:F[t]=z(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!G,"Object",{create:function(t,e){return void 0===e?w(t):J(w(t),e)},defineProperty:V,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Y,getOwnPropertySymbols:H}),A&&o(o.S+o.F*(!G||c(function(){var t=z();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(k(e)||void 0!==t)&&!q(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!q(e))return e}),i[1]=e,I.apply(A,i)}}),z.prototype[T]||n("hJx8")(z.prototype,T,z.prototype.valueOf),f(z,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},fkB2:function(t,e,n){var i=n("UuGF"),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):a(t,e)}},fxuB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={wp:[{id:0,type:0,quality:0,name:"拳头",rg:!1,startWrd:"",atkWord:"出拳攻击",atkDis:2,idx:2,atk:0,mtk:0},{id:1,type:1,quality:0,name:"匕首",rg:!1,startWrd:"",atkWord:"挥动匕首，刺了出去",atkDis:2,idx:2,atk:25,mtk:0},{id:2,type:2,quality:0,name:"弓箭",rg:!0,startWrd:"开始蓄力拉弓",atkWord:"射出了一箭",atkDis:5,idx:0,atk:20,mtk:0}]}},h65t:function(t,e,n){var i=n("UuGF"),r=n("52gC");t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),u=i(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},hJx8:function(t,e,n){var i=n("evD5"),r=n("X8DO");t.exports=n("+E39")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},hjqR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),a=n("pOLX").default.construct,o=[],s=[],u=function t(e){r()(this,t),this.data={},this.data.id=e.id,this.data.ownBy=e.side,this.data.map=e.idx,this.data.num1=0,this.data.num2=0,this.data.num3=0,this.data.num4=0},c={BuildCon:function(t,e,i,r){if(c.canBuild(t,e,i,r)){var l=n("iPAz").default.propCtrl,f=a[i],d=l.get(r);0!=f.gold&&d.ad("gold",-1*f.gold),void 0==s[r]&&(s[r]=[]);var p=n("GPv1").default.mapCtrl.getMapByPos(t,e),v=new u({id:i,side:r,idx:p.data.idx}),h=o.push(v);p.data.con=h-1,s[r].push(h-1),c.afterBuild(t,e,i,r)}},BuildConForce:function(t,e,i,r){void 0==s[r]&&(s[r]=[]);var a=n("GPv1").default.mapCtrl.getMapByPos(t,e),l=new u({id:i,side:r,idx:a.data.idx}),f=o.push(l);a.data.con=f-1,a.data.ownBy=r,s[r].push(f-1),c.afterBuild(t,e,i,r)},afterBuild:function(t,e,i,r){var o=n("GPv1").default.mapCtrl;if(0==a[i].type){for(var s=a[i].range,u=void 0,c=t-s;c<=t+s;c++)for(var l=e-s;l<=e+s;l++)o.inMap(c,l)&&(t-c)*(t-c)+(e-l)*(e-l)<=s*s&&0==(u=o.getMapByPos(c,l)).data.in&&(u.data.in=r);o.renderBorder()}},canBuild:function(t,e,i,r){var o=n("GPv1").default.mapCtrl,s=n("iPAz").default.propCtrl,u=a[i];if(!u)return!1;var c=o.getMapByPos(t,e),l=c.data.ownBy,f=c.data.in;if(console.log("1"),l!=r||f!=r)return!1;if(console.log("2"),-1!=c.data.con)return!1;var d=c.data.type,p=s.get(r);return console.log("3"),void 0!=p&&(console.log("4"),!(d!=u.area||p.gold()<u.gold))},getConByIdx:function(t){return o[t]}};e.default={conCtrl:c,conSide:s}},"i/C/":function(t,e,n){n("exh5"),t.exports=n("FeBl").Object.setPrototypeOf},i5i6:function(t,e){},iPAz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("Zrlr"),a=n.n(r),o=n("wxAW"),s=n.n(o),u=n("uXnN").default.dft,c=n("hjqR").default.conSide,l=n("pOLX").default.construct,f=[],d=function(){function t(){a()(this,t),this.data={name:"",gold:0,wood:0,food:0,iron:0,center:0,centerMax:3},this.add={wood:0,food:0,iron:0}}return s()(t,[{key:"gold",value:function(t){if(void 0==t)return this.data.gold;this.data.gold=t}},{key:"iron",value:function(t){if(void 0==t)return this.data.iron;this.data.iron=t}},{key:"food",value:function(t){if(void 0==t)return this.data.food;this.data.food=t}},{key:"wood",value:function(t){if(void 0==t)return this.data.wood;this.data.wood=t}},{key:"ad",value:function(t,e){var n=this.data[t];n+=e,this.data[t]=n}},{key:"month",value:function(){this.data.wood+=this.add.wood,this.data.food+=this.add.food,this.data.iron+=this.add.iron}},{key:"recal",value:function(t){var e=c[t];if(void 0!=e){this.add.wood=0,this.add.food=0,this.add.iron=0;for(var n=i.length,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,f=0;f<n;f++)r=(i=e[f]).data.id,i.data.ownBy==t&&2==(o=l[r]).type&&(a=i.data.num1,s=o.work.type,u=Math.ceil(a/o.work.worker*o.work.max),this.add[s]+=u)}}}]),t}(),p=new(function(){function t(){a()(this,t)}return s()(t,[{key:"create",value:function(t){if(void 0==f[t]){var e=new d;f[t]=e}}},{key:"month",value:function(){for(var t=f.length,e=0;e<t;e++)void 0!=f[e]&&f[e].month()}},{key:"get",value:function(t){return f[t]}}]),t}());i=u.plySide,p.create(i),p.get(i).gold(50),e.default={propCtrl:p,propList:f}},kM2E:function(t,e,n){var i=n("7KvD"),r=n("FeBl"),a=n("+ZMJ"),o=n("hJx8"),s=n("D2L2"),u=function(t,e,n){var c,l,f,d=t&u.F,p=t&u.G,v=t&u.S,h=t&u.P,y=t&u.B,m=t&u.W,g=p?r:r[e]||(r[e]={}),k=g.prototype,_=p?i:v?i[e]:(i[e]||{}).prototype;for(c in p&&(n=e),n)(l=!d&&_&&void 0!==_[c])&&s(g,c)||(f=l?_[c]:n[c],g[c]=p&&"function"!=typeof _[c]?n[c]:y&&l?a(f,i):m&&_[c]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):h&&"function"==typeof f?a(Function.call,f):f,h&&((g.virtual||(g.virtual={}))[c]=f,t&u.R&&k&&!k[c]&&o(k,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},kiBT:function(t,e,n){t.exports={default:n("i/C/"),__esModule:!0}},lOnJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},lktj:function(t,e,n){var i=n("Ibhu"),r=n("xnc9");t.exports=Object.keys||function(t){return i(t,r)}},mClu:function(t,e,n){var i=n("kM2E");i(i.S+i.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},n0T6:function(t,e,n){var i=n("Ibhu"),r=n("xnc9").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},oM7Q:function(t,e,n){n("sF+V");var i=n("FeBl").Object;t.exports=function(t,e){return i.create(t,e)}},pFYg:function(t,e,n){"use strict";e.__esModule=!0;var i=o(n("Zzip")),r=o(n("5QVw")),a="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}},pOLX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={names:{food:"粮食",wood:"木材",iron:"生铁"},construct:[{id:0,name:"据点",desc:"据点一定范围以内会成为您的边界，边界内占领的土地才能进行建造",need:"需要平原",gold:0,area:0,img:"village_0",type:0,range:2},{id:1,name:"村镇",desc:"村镇会吸引人们来居住，提供劳动力和税收。",need:"需要平原",gold:0,area:0,img:"village_0",type:1},{id:2,name:"田地",desc:"田地能产出粮食、草药及其它作物，需要劳工",need:"需要树林",gold:20,area:0,img:"crop_0",type:2,work:{worker:5,max:100,type:"food"}},{id:3,name:"林站",desc:"林站从树林产出木材，和其它的东西",need:"需要树林",gold:20,area:0,img:"crop_0",type:2,work:{worker:5,max:10,type:"wood"}},{id:4,name:"矿站",desc:"矿站能让劳力从矿场采集石头、矿产",need:"需要矿场",gold:100,area:2,img:"village_0",type:2,work:{worker:5,max:10,type:"iron"}}]}},qio6:function(t,e,n){var i=n("evD5"),r=n("77Pl"),a=n("lktj");t.exports=n("+E39")?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,u=0;s>u;)i.f(t,n=o[u++],e[n]);return t}},qkKv:function(t,e,n){var i=n("FeBl"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},sB3e:function(t,e,n){var i=n("52gC");t.exports=function(t){return Object(i(t))}},"sF+V":function(t,e,n){var i=n("kM2E");i(i.S,"Object",{create:n("Yobk")})},tF5I:function(t,e){},tY3V:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("2rjF"),r=n("birc"),a=n("wFRd"),o=n("XIw1").a.fightRecord,s=(r.default.role,a.default.Fight);var u={name:"fightPnl",data:function(){return{showClose:s.showClose,info:o,show:s.showPnl}},computed:{},created:function(){},mounted:function(){},methods:{close:function(){s.closeUI()}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show.v?n("div",[n("div",{staticClass:"md bd"}),t._v(" "),n("div",{staticClass:"fp bframe"},[n("textarea",{staticClass:"msg",attrs:{name:"",id:"ftMsg",rows:"13",readonly:""}},[t._v(t._s(t.info.log))]),t._v(" "),t.showClose.v?n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]):t._e()])]):t._e()},staticRenderFns:[]};var l=n("VU/8")(u,c,!1,function(t){n("Hew6")},"data-v-339375ae",null).exports,f=n("PKMK"),d=n("VGjY"),p=n("dwz5"),v=f.default.FSKL,h=r.default.role,y=r.default.ui,m=d.default.item,g=p.default.NG,k={name:"plyPnl",data:function(){return{player:h,show:y,sel:1,zfPnl:!1,cuFtIdx:-1}},computed:{bag:function(){return this.player.bag()},ngList:function(){return this.player.attr.ng},fsl:function(){return this.player.attr.fskl},zfList:function(){return this.player.attr.zf},name:function(){return this.player.name()},hpmax:function(){return this.player.hpmax()},hp:function(){return this.player.hp()},atk:function(){return this.player.atk()},mtk:function(){return this.player.mtk()},def:function(){return this.player.def()},spd:function(){return this.player.spd()},learning:function(){return-1!=this.player.attr.cl.type},clTime:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;if(0==t){var n=this.player.attr.ng[e],i=n.lv,r=n.id,a=g[r].lb,o=g[r].lbp,s=Math.ceil(a+Math.pow(o,i));return(n.study/s*100).toFixed(0)+"%"}if(1==t){console.log("idx="+e);var u=this.player.attr.zf[e];i=u.lv,r=u.id,a=v[r].lb,o=v[r].lbp,s=Math.ceil(a+Math.pow(o,i));return(u.study/s*100).toFixed(0)+"%"}},yxLv:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;return 0==t?this.player.attr.ng[e].lv:1==t?(console.log("idx="+e),this.player.attr.zf[e].lv):void 0}},methods:{close:function(){this.zfPnl=!1,this.show.pnl=!1},itemName:function(t){var e=this.bag[t].id;return m[e].name},itemNum:function(t){return this.bag[t].stack},useItem:function(t){this.player.bagUseItem(t)},itemIcon:function(t){var e=this.bag[t].id;return"/static/img/mlGame/item_"+m[e].icon+".png"},psel:function(t){this.sel=t},ngName:function(t){var e=this.player.attr.ng[t].id;return g[e].name},ngIcon:function(t){var e=this.player.attr.ng[t].id;return"/static/img/mlGame/ng_"+g[e].icon+".png"},zfName:function(t){var e=this.player.attr.zf[t].id;return v[e].name},zfLv:function(t){return this.player.attr.zf[t].lv},ngLv:function(t){return this.player.attr.ng[t].lv},szzfName:function(t){var e=this.player.attr.fskl[t],n=this.player.attr.zf[e].id;return v[n].name},szzfLv:function(t){var e=this.player.attr.fskl[t];return this.player.attr.zf[e].lv},zfIcon:function(t){var e=this.player.attr.zf[t].id;return"/static/img/mlGame/zf_"+v[e].icon+".png"},skIcon:function(t){var e=this.player.attr.fskl[t],n=this.player.attr.zf[e].id;return"/static/img/mlGame/zf_"+v[n].icon+".png"},study:function(t,e){this.player.changeStudy(t,e)},clIcon:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;if(0==t){var n=this.player.attr.ng[e].id;return"/static/img/mlGame/ng_"+g[n].icon+".png"}if(1==t){n=this.player.attr.zf[e].id;return"/static/img/mlGame/zf_"+v[n].icon+".png"}},openZfPnl:function(t){this.cuFtIdx=t,this.zfPnl=!0},zfSel:function(t){this.player.addToFtByIdxPos(t,this.cuFtIdx),this.zfPnl=!1}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show.pnl?n("div",[n("div",{staticClass:"md bd"}),t._v(" "),n("div",{staticClass:"topBar"},[n("div",{staticClass:"btn",class:{active:1==t.sel},on:{click:function(e){t.psel(1)}}},[t._v("\n\t\t\t基本信息\n\t\t")]),t._v(" "),n("div",{staticClass:"btn",class:{active:3==t.sel},on:{click:function(e){t.psel(3)}}},[t._v("\n\t\t\t所有战法\n\t\t")]),t._v(" "),n("div",{staticClass:"btn",class:{active:2==t.sel},on:{click:function(e){t.psel(2)}}},[t._v("\n\t\t\t技艺/内功\n\t\t")])]),t._v(" "),n("div",{staticClass:"box"},[t.zfPnl?n("div",{staticClass:"zfSelPnl"},[n("div",{staticClass:"txt"},[t._v("全部战法")]),t._v(" "),n("div",{staticClass:"contain"},t._l(t.zfList,function(e,i){return n("div",{key:i},[n("div",{staticClass:"left cell",attrs:{id:"zf_"+i},on:{click:function(e){t.zfSel(i)}}},[n("img",{staticClass:"pic",attrs:{src:t.zfIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.zfName(i))+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.zfLv(i))+"\n\t\t\t\t\t\t")])])])})),t._v(" "),n("button",{staticClass:"clo",on:{click:function(e){t.zfPnl=!1}}},[t._v("关闭")])]):t._e(),t._v(" "),1==t.sel?n("div",[n("div",{staticClass:"attr"},[n("div",{staticClass:"tit"},[t._v("\n\t\t\t\t\t基本属性\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"con"},[n("div",{staticClass:"lcon"},[n("p",[t._v("生命："+t._s(t.hp)+"/"+t._s(t.hpmax))]),t._v(" "),n("p",[t._v("悟性：0")]),t._v(" "),n("p",[t._v("速度："+t._s(t.spd))])]),t._v(" "),n("div",{staticClass:"rcon"},[n("p",[t._v("攻击："+t._s(t.atk))]),t._v(" "),n("p",[t._v("仙法："+t._s(t.mtk))]),t._v(" "),n("p",[t._v("防御力："+t._s(t.def))])])])]),t._v(" "),n("div",{staticClass:"szzf"},[n("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t上阵战法\n\t\t\t\t")]),t._v(" "),t._l(t.fsl,function(e,i){return n("div",{key:i,staticClass:"left cell",on:{click:function(e){t.openZfPnl(i)}}},[e<0?n("div",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t空\n\t\t\t\t\t")]):n("div",[n("img",{staticClass:"pic",attrs:{src:t.skIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v(t._s(t.szzfName(i)))]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.szzfLv(i))+"\n\t\t\t\t\t\t")])])])})],2),t._v(" "),n("div",{staticClass:"cl"},[n("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t研习中\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"cell"},[t.learning?n("div",[n("img",{staticClass:"pic",attrs:{src:t.clIcon()}}),t._v(" "),n("div",{staticClass:"time"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.clTime)+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"yxlv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.yxLv)+"\n\t\t\t\t\t\t")])]):n("div",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t空\n\t\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"bagttl"},[t._v("\n\t\t\t\t背包\n\t\t\t")]),t._v(" "),n("div",{staticClass:"bag"},t._l(t.bag,function(e,i){return n("div",{key:i,staticClass:"left",on:{click:function(e){t.useItem(i)}}},[n("div",{staticClass:"item",attrs:{id:"bag_"+i}},[n("div",{staticClass:"picf"},[n("img",{staticClass:"pic",attrs:{src:t.itemIcon(i)}})]),t._v(" "),n("div",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.itemNum(i))+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.itemName(i))+"\n\t\t\t\t\t\t")])])])}))]):t._e(),t._v(" "),2==t.sel?n("div",{staticClass:"ng"},t._l(t.ngList,function(e,i){return n("div",{key:i,staticClass:"left"},[n("div",{staticClass:"cell",attrs:{id:"ng_"+i},on:{click:function(e){t.study(0,i)}}},[n("img",{staticClass:"pic",attrs:{src:t.ngIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t"+t._s(t.ngName(i))+"\n\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t"+t._s(t.ngLv(i))+"\n\t\t\t\t\t")])])])})):t._e(),t._v(" "),3==t.sel?n("div",{staticClass:"ng"},t._l(t.zfList,function(e,i){return n("div",{key:i,staticClass:"left"},[n("div",{staticClass:"cell",attrs:{id:"zf_"+i},on:{click:function(e){t.study(1,i)}}},[n("img",{staticClass:"pic",attrs:{src:t.zfIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t"+t._s(t.zfName(i))+"\n\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t"+t._s(t.zfLv(i))+"\n\t\t\t\t\t")])])])})):t._e(),t._v(" "),n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")])])]):t._e()},staticRenderFns:[]};var b=n("VU/8")(k,_,!1,function(t){n("tF5I")},"data-v-dda81dfe",null).exports;var x=n("fxuB").default.wp,w=i.a.Player,B={str:"强壮",agi:"敏捷"},P={name:"wpDesc",data:function(){return{wp:w.weapon,ply:w.attr}},computed:{n:function(){return x[this.wp.id].name},atk:function(){return x[this.wp.id].atk},ka:function(){return B[x[this.wp.id].ka]},kaa:function(){return 100*x[this.wp.id].kaa},dis:function(){return x[this.wp.id].atkDis},aspd:function(){return.5*x[this.wp.id].aspd},add:function(){return Math.ceil(x[this.wp.id].atk*(1+this.ply[x[this.wp.id].ka].value*x[this.wp.id].kaa))-x[this.wp.id].atk},rg:function(){return x[this.wp.id].rg?"远程武器":"近程武器"}},methods:{close:function(){this.$emit("clsWp")}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bx bframe"},[n("h2",[t._v("[ "+t._s(t.n)+" ]")]),t._v(" "),n("p",[t._v("- "+t._s(t.rg)+" -")]),t._v(" "),n("p",[t._v("攻击力："),n("b",[t._v(t._s(t.atk)+"+"),n("label",{staticClass:"add"},[t._v(t._s(t.add))])])]),t._v(" "),n("p",[t._v("主要属性："+t._s(t.ka)+"（每点"+t._s(t.ka)+"提升 "+t._s(t.kaa)+"% 攻击力）")]),t._v(" "),n("p",[t._v("攻击距离："+t._s(t.dis)+" 米")]),t._v(" "),n("p",[t._v("攻击速度：每 "+t._s(t.aspd)+" 秒攻击一次")]),t._v(" "),n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")])])},staticRenderFns:[]};var S=n("VU/8")(P,C,!1,function(t){n("40Tq")},"data-v-410933b9",null).exports,M=n("B3SJ"),O=(n("uXnN").default.data,M.default.gT),E={name:"tiv",data:function(){return{ti:O}},computed:{year:function(){return this.ti.year},m:function(){return this.ti.month}},methods:{}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",[this._v("第 "+this._s(this.year)+" 年 "+this._s(Math.floor(this.m))+" 月 ")])])},staticRenderFns:[]};var A=n("VU/8")(E,z,!1,function(t){n("R3U4")},"data-v-3b448641",null).exports,I=n("mvHQ"),L=n.n(I),T=a.default.Fight,j=r.default.role,F=[{u:0,ply:!1},{u:0,ply:!1},{u:0,ply:!1}],N={new:function(){F[0].u=j,F[0].ply=!0},load:function(){try{var t=JSON.parse(localStorage.zhenxing);if(t)for(var e=0;e<F.length;e++)F[e].u=t[e].u,F[e].ply=t[e].ply}catch(t){N.new()}},save:function(){localStorage.zhenxing=L()(F)},fight:function(t,e){j.hp()<=0||T.start({left:[F[0].u,F[1].u,F[2].u],right:t,plySide:1},e)}},R={zhenxing:F,zxCtrl:N},D=n("GPv1"),G=M.default.gtime,U=r.default.role,W=R.zxCtrl,K=D.default.mapCtrl,Q=n("uXnN").default.dft,q=n("hjqR").default.conCtrl,V={start:function(){V.new(),K.genMapArea(25,25,15),U.side(Q.plySide),q.BuildConForce(25,25,0,U.side()),U.setPos(25,25),K.setCutPos(25,25),K.setCutSel(25,25)},new:function(){G.new(),U.new(),W.new()},load:function(){G.load(),U.load(),W.load()},mounted:function(){K.createEl()}},J={c:V},Z=r.default.role,X=n("B3SJ").default.gT,Y=n("B3SJ").default.gtime;var H={name:"bottomBar",data:function(){return{player:Z,time:X}},computed:{plyhpw:function(){return Math.floor(this.player.hp()/this.player.hpmax()*45)},plyhpc:function(){return function(t){return t>=.8?"#00FF33":t>=.4?"orange":"red"}(this.player.hp()/this.player.hpmax())},apts:function(){return Y.remain()}},methods:{showPnl:function(){r.default.ui.pnl||(r.default.ui.pnl=!0)},addMonth:function(){Y.addMonth(1)}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottomBar"},[n("img",{staticClass:"player_head",attrs:{src:"/static/img/mlGame/player_head.png"},on:{click:function(e){t.showPnl()}}}),t._v(" "),n("div",{staticClass:"hpBar z1",style:{width:"45px","background-color":"black"}}),t._v(" "),n("div",{staticClass:"hpBar z2",style:{width:t.plyhpw+"px","background-color":t.plyhpc}}),t._v(" "),n("div",{staticClass:"apts"},[t._v("行动力："+t._s(t.apts))]),t._v(" "),n("button",{staticClass:"turn",on:{click:t.addMonth}},[t._v("下一个月")])])},staticRenderFns:[]};var tt=n("VU/8")(H,$,!1,function(t){n("i5i6")},"data-v-e536c3ce",null).exports,et={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sce"},[e("div",{attrs:{id:"maps"}}),this._v(" "),e("img",{staticClass:"flag",attrs:{id:"flag",src:"/static/img/mlGame/flag.png"}}),this._v(" "),e("div",{staticClass:"mapInfo",attrs:{id:"mapInfo"}}),this._v(" "),e("div",{staticClass:"mapAct",attrs:{id:"mapAct"}}),this._v(" "),e("div",{staticClass:"build",attrs:{id:"construct"}})])}]};var nt=n("VU/8")({name:"scene"},et,!1,function(t){n("CFzG")},null,null).exports,it=J.c,rt=r.default.role,at=R.zxCtrl,ot=n("iPAz").default.propList,st={name:"gameView",data:function(){return{ply:rt,prop:ot}},computed:{gold:function(){return rt.gold()}},components:{fightPnl:l,wpDesc:S,tiv:A,bottomBar:tt,plyPnl:b,scene:nt},created:function(){it.start()},mounted:function(){it.mounted()},methods:{clsWp:function(){},opWp:function(){},test:function(){rt.bagAddItem(0),rt.bagAddItem(1)},fight:function(){var t=new i.a.Npc(100,0),e=new i.a.Npc(101,0),n=new i.a.Npc(102,0);at.fight([t,n,e])},newGame:function(){it.new()},equipWp1:function(){a.default.Fight.showRecord()},equipWp2:function(){r.default.ui.pnl||(r.default.ui.pnl=!0)},test1:function(){console.log(rt.atk())}}},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mlBoard nosel"},[n("div",{staticClass:"topBar"},[n("tiv",{staticClass:"left"}),t._v(" "),n("div",{staticClass:"right"},[t._v("您拥有： "+t._s(t.gold)+" 金")])],1),t._v(" "),n("fightPnl"),t._v(" "),n("plyPnl"),t._v(" "),n("scene"),t._v(" "),t.wpDesc?n("wpDesc",{on:{clsWp:t.clsWp}}):t._e(),t._v(" "),n("div",{staticClass:"infoBox",attrs:{id:"info"}}),t._v(" "),n("bottomBar"),t._v(" "),n("div",{staticClass:"tool"},[n("button",{staticClass:"right",on:{click:t.test}},[t._v("添加物品")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.fight}},[t._v("战斗")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.newGame}},[t._v("新游戏")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.equipWp1}},[t._v("显示战斗记录")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.equipWp2}},[t._v("人物")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.test1}},[t._v("测试")])])],1)},staticRenderFns:[]};var ct={name:"magicLand",components:{gameView:n("VU/8")(st,ut,!1,function(t){n("V2ZU")},"data-v-a471524c",null).exports},data:function(){return{title:"苦逼屠龙记"}},computed:{desc:function(){return"苦逼屠龙记是老徐在小破站上做的第一个游戏（游戏仍然在开发中，目前不具备可玩性）"}},created:function(){document.title="苦逼屠龙记"}},lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bak"},[n("div",{staticClass:"title"},[n("h3",[t._v(t._s(t.title))]),t._v(" "),n("p",{staticClass:"d"},[t._v(t._s(t.desc))])]),t._v(" "),n("br"),t._v(" "),n("div",[n("gameView")],1)])},staticRenderFns:[]};var ft=n("VU/8")(ct,lt,!1,function(t){n("z8LR")},"data-v-944d4aa2",null);e.default=ft.exports},uXnN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={role:{new:{hp:500,atkBase:50,mtkBase:5,defBase:0,fireBase:0,iceBase:0,poisBase:0,spdBase:50,lvl:1,exp:0,name:"冒险者"}},dft:{plySide:1}}},uqUo:function(t,e,n){var i=n("kM2E"),r=n("FeBl"),a=n("S82l");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},"vFc/":function(t,e,n){var i=n("TcQ7"),r=n("QRG4"),a=n("fkB2");t.exports=function(t){return function(e,n,o){var s,u=i(e),c=r(u.length),l=a(o,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},"vIB/":function(t,e,n){"use strict";var i=n("O4g8"),r=n("kM2E"),a=n("880/"),o=n("hJx8"),s=n("/bQp"),u=n("94VQ"),c=n("e6n0"),l=n("PzxK"),f=n("dSzd")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,h,y,m){u(n,e,v);var g,k,_,b=function(t){if(!d&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",w="values"==h,B=!1,P=t.prototype,C=P[f]||P["@@iterator"]||h&&P[h],S=C||b(h),M=h?w?b("entries"):S:void 0,O="Array"==e&&P.entries||C;if(O&&(_=l(O.call(new t)))!==Object.prototype&&_.next&&(c(_,x,!0),i||"function"==typeof _[f]||o(_,f,p)),w&&C&&"values"!==C.name&&(B=!0,S=function(){return C.call(this)}),i&&!m||!d&&!B&&P[f]||o(P,f,S),s[e]=S,s[x]=p,h)if(g={values:w?S:b("values"),keys:y?S:b("keys"),entries:M},m)for(k in g)k in P||a(P,k,g[k]);else r(r.P+r.F*(d||B),e,g);return g}},wFRd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PKMK"),r=n("XIw1"),a=i.default.FSKL,o=i.default.FSC,s=r.a.fightRecord,u=i.default.EFF,c=[];c[1]=[],c[2]=[];var l={log:""},f={showPnl:{v:!1},showClose:{v:!1},over:!0,start:function(t,e){f.over&&(f.init(t,e),f.beforeRound(),f.roundStart(),f.roundOver())},init:function(t,e){l={log:""},f.callback=void 0==e?void 0:e,f.callBackParam=0,f.round=1,f.over=!1,f.plySide=t.plySide,f.winSide=1,p(1,t.left),p(2,t.right)},beforeRound:function(){var t;for(v();0!=(t=C());)_(t)},roundStart:function(){for(;f.round<=10&&(d("\n---- 第 "+f.round+" 回合开始 ----\n"),f.round++,v(),f.over=f.ARound(),!f.over););},roundOver:function(){var t;d("\n---- 战斗结束 ----");for(var e=1;e<=2;e++)for(var n=0;n<3;n++)0!=(t=c[e][n].u)&&(t.ftInit(),t.ft.round=0,t.ft.eff=[]);s.log=l.log,f.callback&&f.callback()},ARound:function(){for(var t;;){if(0==(t=C()))return!1;if(1==m(t))return!0}return!1},closeUI:function(){f.showPnl.v=!1},showRecord:function(){f.showPnl.v=!0,f.showClose.v=!0}};function d(t){""!=t&&(l.log=l.log+t+"\n")}function p(t,e){for(var n,i,r=0;r<3;r++)c[t][r]={},c[t][r].u=e[r],1==t?(n=-1*r+3,i=2):(n=r+4,i=1),c[t][r].pos=n,c[t][r].done=!1,0!=c[t][r].u&&(c[t][r].u.side=t,c[t][r].u.t=i,c[t][r].u.idx=r,c[t][r].u.ftOn=!0,c[t][r].u.ftInit(),c[t][r].u.ft.round=0,c[t][r].u.ft.eff=[])}function v(){for(var t,e=1;e<=2;e++)for(var n=0;n<3;n++)t=c[e][n].u,c[e][n].done=!1,0!=t&&t.hp()>0&&x(t)}function h(){return 0==y(1)?(f.winSide=2,1):0==y(2)?(f.winSide=1,1):0}function y(t){var e,n=0,i=0;for(n=0;n<3;n++)if(0!=(e=c[t][n].u)&&e.hp()>0){i++;break}return i}function m(t){var e;if(1==function(t){var e,n,i,r,o,s=t.fskl(),u=s.length;if(!(u>0))return 0;for(var c=0;c<u;c++)if((o=s[c])>=0&&(e=t.attr.zf[o].id,1==a[e].type&&(n=t.attr.zf[o].lv,i=a[e].probAdd,r=a[e].prob+(n-1)*i,Math.random()<=r&&1==g(t,e,n))))return 1}(t))return!0;if(0!=(e=function(t){var e=t.atkDis();return function(t,e){for(var n,i,r=0,a=t.side,o=t.idx,s=c[a][o].pos,u=t.t,l=[],f=0;f<3;f++)n=c[u][f].u,i=c[u][f].pos,0!=n&&n.hp()>0&&e>=Math.abs(s-i)&&l.push(n);if(l.length>0){var o=Math.floor(Math.random()*l.length);r=l[o]}return r}(t,e)}(t))){if(1==function(t,e){d("【"+t.name()+"】普通攻击");var n=t.atk();n=function(t,e){return e}(0,n);var i=e.def();(n=Math.ceil(n*(150/(150+i))))>0&&(e.ft.t=e,e.damage(n)),d("  【"+e.name()+"】受到"+n+"伤害("+e.hp()+")"),e.hp()<=0&&d("  【"+e.name()+"】被击倒");return h()}(t,e))return!0}else d("【"+t.name()+"】攻击距离内没有目标"),function(t){d("  【"+t.name()+"】移动");var e=t.side,n=t.idx,i=c[e][n].pos;1==e?i++:i--;c[e][n].pos=i}(t);return!1}function g(t,e,n){if((r=P(t,a[e].range,1,a[e].target).length)>0){d("【"+t.name()+"】 发动 ["+a[e].name+"] !!");for(var i=JSON.parse(a[e].eff),r=i.length,o=0;o<r;o++)if(1==k(t,i[o],n,e))return 1}return 0}function k(t,e,n,i){var r,s,u,c,l=o[e].range,f=o[e].targetNum,p=o[e].target,v=o[e].src,y=o[e].basic,m=o[e].add,g=Math.ceil(t.getCal(v)*(y+(n-1)*m)),k=o[e].numType,_=P(t,l,f,p),x=_.length;if(!(x>0))return 0;for(var w=0;w<x;w++){r=_[w],0==g||1!=a[i].type&&3!=a[i].type||(s=0==k?r.def():r.mtk(),u=g,1!=p&&3!=p&&(u=Math.ceil(u*(150/(150+s)))),r.damage(u),d("  【"+r.name()+"】受到"+u+"伤害("+r.hp()+")"),r.hp()<=0&&d("  【"+r.name()+"】被击倒")),c=JSON.parse(o[e].eff);for(var B=0;B<c.length;B++)b(r,c[B],n,t);if(1==h())return 1}}function _(t){var e,n,i=t.fskl(),r=i.length;if(r>0)for(var o=0;o<r;o++)(n=i[o])>=0&&(e=t.attr.zf[n].id)>=0&&0==a[e].type&&g(t,e,t.attr.zf[n].lv)}function b(t,e,n,i){t.ft.eff.push({id:e,lv:n,round:f.round,from:i}),w(t),t.attrCheck()}function x(t){var e,n,i,r=0;if(t.ft.eff.length>0)for(;!(r>=t.ft.eff.length);)e=(n=t.ft.eff[r]).id,i=n.round,f.round-i>u[e].round&&B(t,e,r),r++}function w(t){var e,n,i,r,a,o,s,c,l,f=t.ft.eff,d=f.length,p=0;for(t.ftInit(),p=0;p<d;p++)f[p].id,e=f[p].lv,n=u[p].attr,a=u[p].source,i=u[p].base,r=u[p].psrc,o=u[p].badd,s=u[p].padd,c=t.getCal(a)||1,l=Math.ceil(i+(e-1)*o+c*(r+(e-1)*s)),t.ft[n]=t.ft[n]+l}function B(t,e,n){d("【"+t.name()+"】 来自 【"+t.ft.eff[n].from.name()+"】 的 【"+u[t.ft.eff[n].id].name+" 】 效果消失了"),t.ft.eff.splice(n,1),w(t),t.attrCheck()}function P(t,e,n,i){var r=[];if(0==i)return r.push(t),r;if(1==i||2==i){for(var a,o,s=t.idx,u=c[t.side][s].pos,l=2==i?t.t:t.side,f=0;f<3;f++)a=c[l][f].u,o=c[l][f].pos,0!=a&&a.hp()>0&&e>=Math.abs(u-o)&&r.push(a);for(;r.length>n;)s=Math.floor(Math.random()*r.length),r=r.splice(s,1);return r}return 0!=t.ft.t?(r.push(t.ft.t),r):void 0}function C(){for(var t,e=0,n=-1,i=1;i<=2;i++)for(var r=0;r<3;r++)0!=(t=c[i][r].u)&&0==c[i][r].done&&t.hp()>0&&t.spd()>n&&(e=t,n=t.spd());return 0!=e&&(c[e.side][e.idx].done=!0),e}e.default={Fight:f}},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("C4MV"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},xGkn:function(t,e,n){"use strict";var i=n("4mcu"),r=n("EGZi"),a=n("/bQp"),o=n("TcQ7");t.exports=n("vIB/")(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},xnc9:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},z8LR:function(t,e){},zQR9:function(t,e,n){"use strict";var i=n("h65t")(!0);n("vIB/")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},zwoO:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("pFYg"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}}});
//# sourceMappingURL=0.7da37dc2eddbe855a7e4.js.map