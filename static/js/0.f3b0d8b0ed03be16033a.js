webpackJsonp([0],{"+E39":function(t,e,n){t.exports=!n("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+ZMJ":function(t,e,n){var i=n("lOnJ");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"+tPU":function(t,e,n){n("xGkn");for(var i=n("7KvD"),r=n("hJx8"),a=n("/bQp"),o=n("dSzd")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var d=s[l],u=i[d],c=u&&u.prototype;c&&!c[o]&&r(c,o,d),a[d]=a.Array}},"/bQp":function(t,e){t.exports={}},"/n6Q":function(t,e,n){n("zQR9"),n("+tPU"),t.exports=n("Kh4W").f("iterator")},"06OY":function(t,e,n){var i=n("3Eo+")("meta"),r=n("EqjI"),a=n("D2L2"),o=n("evD5").f,s=0,l=Object.isExtensible||function(){return!0},d=!n("S82l")(function(){return l(Object.preventExtensions({}))}),u=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},c=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},onFreeze:function(t){return d&&c.NEED&&l(t)&&!a(t,i)&&u(t),t}}},"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"3Eo+":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},"40Tq":function(t,e){},"4mcu":function(t,e){t.exports=function(){}},"52gC":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"5QVw":function(t,e,n){t.exports={default:n("BwfY"),__esModule:!0}},"5yrw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),a=n("wxAW"),o=n.n(a),s=n("birc").default.role,l=n("e2vB").default.block,d=n("e2vB").default.cell,u=n("pOLX").default.construct,c=n("e2vB").default.typeName,f=n("aNJt").default.mapCtrl,p=n("pOLX").default.cons_sheet,v=n("pOLX").default.names,h=9,y=7,m=(h+1)/2,g=(y+1)/2,k=55,_=175,w=60,b=function(){function t(){r()(this,t),this.viewMode=0,this.WorldViewCenter={x:0,y:0},this.curBlock={x:0,y:0},this.worldSelect={x:-1,y:-1,i:-1,j:-1},this.cellSelect={x:-1,y:-1,i:-1,j:-1},this.lastWorldSel={x:-1,y:-1,i:-1,j:-1},this.showBorder=!1,this.renderReady=!1}return o()(t,[{key:"getWorldViewCenter",value:function(){return this.WorldViewCenter}},{key:"setWorldViewCenter",value:function(t,e){this.WorldViewCenter.x=t,this.WorldViewCenter.y=e}},{key:"createEl",value:function(){!function(){for(var t=document.getElementById("world"),e=function(e){for(var n=function(n){var i=e*w+_,r=(y-n-1)*w+k,a=document.createElement("div"),o=document.createElement("img"),s=document.createElement("img"),l=document.createElement("div");o.id="tile_img_"+e+"_"+n,o.src="",o.classList.add("mapTile"),s.id="tile_build_"+e+"_"+n,s.src="",s.classList.add("mapTileNo"),l.id="border_"+e+"_"+n,l.classList.add("border"),l.style.opacity="0.5",a.appendChild(o),a.appendChild(l),a.appendChild(s),a.classList.add("map"),a.id="tile_"+e+"_"+n,a.style.top=r+"px",a.style.left=i+"px",a.onmousedown=function(t){t.preventDefault()},a.onmouseup=function(t){R.onLeftClickTile(e,n)},t.appendChild(a)},i=0;i<y;i++)n(i)},n=0;n<h;n++)e(n)}(),this.renderReady=!0,document.getElementById("closeAssign").onclick=function(){T()}}},{key:"render",value:function(){0==this.viewMode?this.renderWorld():this.renderBlock(),j()}},{key:"showBlock",value:function(t){if(t){document.getElementById("block").style.visibility="visible"}else{for(var e=document.getElementById("block");e.firstChild;)e.removeChild(e.firstChild);e.style.visibility="hidden"}}},{key:"renderCell",value:function(t,e,i){if(this.renderReady&&0!=this.viewMode){var r=n("hjqR").default.builds,a=document.getElementById("cell_build_"+e+"_"+i),o=f.getBlockByIdx(t),l=o.data.cells[e*o.data.width+i].data.build;if(-1==l)return a.src="",void(a.style.visibility="hidden");var d=r[s.side()][l].data.lv,c=r[s.side()][l].data.id;if(u[c].lvl){var p="/static/img/mlGame/bd_"+u[c].lvl[d].img+".png";a.src=p}else{var v="/static/img/mlGame/bd_"+u[c].img+".png";a.src=v}a.style.visibility="visible"}}},{key:"renderBlock",value:function(t){var e=this;-1==t.data.cells&&t.createCell();t.data.id;for(var n=t.data.width,i=void 0,r=void 0,a=document.getElementById("block"),o=Math.floor((5-n)/2*w),s=function(s){for(var l=function(l){i=t.data.cells[s*n+l],r=i.data.id;var u=s*w+350+o,c=(n-l-1)*w+100+o,f=document.createElement("div"),p=document.createElement("img"),v=document.createElement("img");p.id="cell_img_"+s+"_"+l,p.src="/static/img/mlGame/cell_"+d[r].img+".png",p.classList.add("mapTile"),v.id="cell_build_"+s+"_"+l,v.src="",v.classList.add("mapTileNo"),f.appendChild(p),f.appendChild(v),f.classList.add("map"),f.id="cell_"+s+"_"+l,f.style.top=c+"px",f.style.left=u+"px",f.onmousedown=function(t){t.preventDefault()},f.onmouseup=function(t){e.onLeftCell(s,l)},a.appendChild(f),e.renderCell(t.data.idx,s,l)},u=0;u<n;u++)l(u)},l=0;l<n;l++)s(l)}},{key:"switchView",value:function(t){if(this.viewMode=t,0==t)this.showBlock(!1),B(!1),document.getElementById("world").style.visibility="visible",this.renderWorld(),V();else{var e=this.curBlock.x,n=this.curBlock.y,i=f.getBlockByPos(e,n);if(!i||!i.data.hasCell)return void(this.viewMode=0);document.getElementById("world").style.visibility="hidden",B(!0),this.showBlock(!0),this.renderBlock(i)}A(),C(),V()}},{key:"getBlockTile",value:function(t,e){var n=t-(this.WorldViewCenter.x-m+1),i=e-(this.WorldViewCenter.y-g+1);return document.getElementById("tile_"+n+"_"+i)}},{key:"getBorder",value:function(t,e){var n=t-(this.WorldViewCenter.x-m+1),i=e-(this.WorldViewCenter.y-g+1);return document.getElementById("border_"+n+"_"+i)}},{key:"renderBorderPos",value:function(t,e){if(this.inWorldView(t,e)){var n=this.getBorder(t,e);if(n)if(0!=this.showBorder){n.style.visibility="visible";var i=f.getBlockByPos(t,e).data.ownBy;if(this.inWorldView(t,e+1))if(f.getBlockByPos(t,e+1).data.ownBy==i)n.style.borderTop="",this.getBorder(t,e+1).style.borderBottom="";else this.renderSgB("borderTop",i,n);else this.renderSgB("borderTop",i,n);if(this.inWorldView(t,e-1))if(f.getBlockByPos(t,e-1).data.ownBy==i)n.style.borderBottom="",this.getBorder(t,e-1).style.borderTop="";else this.renderSgB("borderBottom",i,n);else this.renderSgB("borderBottom",i,n);if(this.inWorldView(t+1,e))if(f.getBlockByPos(t+1,e).data.ownBy==i)n.style.borderRight="",this.getBorder(t+1,e).style.borderLeft="";else this.renderSgB("borderRight",i,n);else this.renderSgB("borderRight",i,n);if(this.inWorldView(t-1,e))if(f.getBlockByPos(t-1,e).data.ownBy==i)n.style.borderLeft="",this.getBorder(t-1,e).style.borderRight="";else this.renderSgB("borderLeft",i,n);else this.renderSgB("borderLeft",i,n)}else n.style.visibility="hidden"}}},{key:"renderSgB",value:function(t,e,n){e==s.side()?n.style[t]="1px solid green":n.style[t]=0==e?"":"1px solid red"}},{key:"renderWorld",value:function(){for(var t,e,n,i,r=this.WorldViewCenter.x-m+1,a=this.WorldViewCenter.y-g+1,o=0;o<h;o++)for(var s=0;s<y;s++)e=r+o,n=a+s,i=(t=f.getBlockByPos(e,n)).data.id,document.getElementById("tile_img_"+o+"_"+s).src="/static/img/mlGame/tile_"+l[i].img+".png",this.renderBuild(t),this.renderBorderPos(e,n)}},{key:"renderBuild",value:function(t){if(1!=this.viewMode){var e=t.data.type,n=this.WorldViewCenter.x-m+1,i=this.WorldViewCenter.y-g+1,r=t.data.x-n,a=t.data.y-i,o=document.getElementById("tile_build_"+r+"_"+a);if(1==e){for(var s=t.data.pop,l=c[e].img.length,d=void 0,u=0;u<l;u++)if(s>=c[e].img[u].pop){d=c[e].img[u].img;break}o.style.visibility="visible",o.src="/static/img/mlGame/bt_1_"+d+".png"}if(2==e){var f=c[e].img;o.style.visibility="visible",o.src="/static/img/mlGame/bt_2_"+f+".png"}}}},{key:"posInWorld",value:function(t,e){return!(t<0||e<0||t>=50||e>=50)}},{key:"inWorldView",value:function(t,e){if(t<0||e<0||t>=50||e>=50)return!1;var n=this.WorldViewCenter.x-m+1,i=this.WorldViewCenter.y-g+1;return t>=n&&t<=n+(h-1)&&e>=i&&e<=i+(y-1)}},{key:"renderBorder",value:function(){for(var t=this.WorldViewCenter.x-m+1,e=this.WorldViewCenter.y-g+1,n=void 0,i=void 0,r=0;r<h;r++)for(var a=0;a<y;a++)n=t+r,i=e+a,this.renderBorderPos(n,i)}},{key:"setworldSelect",value:function(t,e,n,i){var r=n||t-(this.WorldViewCenter.x-m+1),a=i||e-(this.WorldViewCenter.y-g+1);this.lastWorldSel.x=this.worldSelect.x,this.lastWorldSel.y=this.worldSelect.y,this.lastWorldSel.i=this.worldSelect.i,this.lastWorldSel.j=this.worldSelect.j,this.worldSelect.x=t,this.worldSelect.y=e,this.worldSelect.i=r,this.worldSelect.j=a,this.setCurBlock()}},{key:"setCurBlock",value:function(t,e){this.curBlock.x=this.worldSelect.x,this.curBlock.y=this.worldSelect.y}},{key:"onLeftClickTile",value:function(t,e){var n=this.WorldViewCenter.x-m+1+t,i=this.WorldViewCenter.y-g+1+e;this.setworldSelect(n,i,t,e),z(),W()}},{key:"onLeftCell",value:function(t,e){this.cellSelect.x=t,this.cellSelect.y=e,z(),W()}},{key:"renderSelTip",value:function(){x()}}]),t}();function x(){var t=document.getElementById("mapInfo");if(t.style.visibility="visible",0==R.viewMode){var e=R.worldSelect.x,i=R.worldSelect.y;if(-1==e||-1==i)return void(t.innerText="");var r=f.getBlockByPos(e,i),a=r.data.id,o=r.data.ownBy,p=r.data.type,v=l[a].name;o==s.side()?t.innerText=0==p?v+" ( "+e+","+i+" )，"+c[p].name:c[p].name+" ( "+e+","+i+" )":0==o?t.innerText=v+" ( "+e+","+i+" )":(t.innerText=v+" ( "+e+","+i+" )",t.innerText=t.innerText+"，被占")}else{var h=R.cellSelect.x,y=R.cellSelect.y;if(-1==h||-1==y)return void(t.innerText="");var m=R.curBlock.x,g=R.curBlock.y,k=f.getBlockByPos(m,g),_=k.data.cells[h*k.data.width+y],w=_.data.id,b=_.data.build;if(-1==b)t.innerText=d[w].name;else{var x=n("hjqR").default.builds,B=x[s.side()][b].data.lv,C=x[s.side()][b].data.id;u[C].lvl?t.innerText=u[C].lvl[B].name:t.innerText=u[C].name}}}function B(t){var e=document.getElementById("blockInfo");if(t){var n=R.curBlock.x,i=R.curBlock.y,r=f.getBlockByPos(n,i);e.style.visibility="visible",e.innerText="【"+function(t){var e=t.data.type;return c[e].name}(r)+"】( "+n+","+i+" )",r.data.ownBy==s.side()&&(e.innerText+="，这块地属于你")}else e.style.visibility="hidden"}function C(){document.getElementById("mapInfo").style.visibility="hidden"}function S(t){var e=document.getElementById("mengban"),n=document.getElementById("buildUI"),i=document.getElementById("assignTitle"),r=void 0;r=c[t.data.type].name,r+="\n 当前产出类型：【"+v[c[t.data.type].productType]+"】",r+="\n 最大劳力："+c[t.data.type].maxWorker,i.innerText=r;var a=document.createElement("div"),o=document.createElement("div");o.id="txtWorkerNum",o.innerText="当前劳力数："+t.workerNum()+"，预计产出：【"+v[c[t.data.type].productType]+"】："+t.calProd()+"/月",a.appendChild(o);var s=document.createElement("button");s.innerText="增加",s.addEventListener("click",function(){M(t,1)}),a.appendChild(s);var l=document.createElement("button");l.innerText="减少",l.addEventListener("click",function(){M(t,-1)}),a.appendChild(l);var d=document.getElementById("choiceArea");a.classList.add("ctt"),a.style.top="10em",d.appendChild(a),e.style.visibility="visible",n.style.visibility="visible"}function M(t,e){t.addWorker(e);var n=document.getElementById("assignTitle");document.getElementById("txtWorkerNum").innerText="当前劳力数："+t.workerNum()+"，预计产出：【"+v[c[t.data.type].productType]+"】："+t.calProd()+"/月";var i=void 0;i=c[t.data.type].name,i+="\n 当前产出类型：【"+v[c[t.data.type].productType]+"】",i+="\n 最大劳力："+c[t.data.type].maxWorker,n.innerText=i}function E(){R.switchView(1)}function P(){R.switchView(0)}function I(){R.showBorder?(R.showBorder=!1,document.getElementById("explore").innerText="显示边界"):(R.showBorder=!0,document.getElementById("explore").innerText="隐藏边界");for(var t=R.WorldViewCenter.x-m+1,e=R.WorldViewCenter.y-g+1,n=void 0,i=void 0,r=0;r<h;r++)for(var a=0;a<y;a++)n=t+r,i=e+a,R.renderBorderPos(n,i)}function O(){var t=document.getElementById("mengban"),e=document.getElementById("buildUI"),n=R.worldSelect.x,i=R.worldSelect.y,r=f.getBlockByPos(n,i),a=r.data.type,o=c[a].to.length;if(!(o<1)){document.getElementById("assignTitle").innerText=c[a].desc;for(var s=document.getElementById("choiceArea");s.firstChild;)s.removeChild(s.firstChild);for(var l=function(t){var e=document.createElement("div");e.classList.add("choice"),e.style.top=8+2.5*t+"em",e.innerText="【"+c[c[a].to[t]].name+"】",e.innerText+="："+c[c[a].to[t]].desc,e.onclick=function(){f.setBlockType(n,i,c[a].to[t]),R.renderBuild(r),T(),W(),V()},s.appendChild(e)},d=0;d<o;d++)l(d);t.style.visibility="visible",e.style.visibility="visible"}}function T(){var t=document.getElementById("mengban"),e=document.getElementById("buildUI");document.getElementById("assignTitle").innerText="";for(var n=document.getElementById("choiceArea");n.firstChild;)n.removeChild(n.firstChild);t.style.visibility="hidden",e.style.visibility="hidden"}function L(){var t=R.worldSelect.x,e=R.worldSelect.y;f.capturePosBySide(t,e,s.side()),W(),V()}function z(){V()}function W(){if(0==R.viewMode){var t=R.worldSelect.x,e=R.worldSelect.y;if(!R.inWorldView(t,e))return;var n=R.WorldViewCenter.x-m+1,i=R.WorldViewCenter.y-g+1;if(t>=n&&t<=n+(h-1)&&e>=i&&e<=i+(y-1)){var r=t-n,a=e-i,o=document.getElementById("tile_"+r+"_"+a),s=o.offsetLeft,l=o.offsetTop,d=document.getElementById("sel");d.style.border="solid 1px yellow",d.style.visibility="visible",d.style.top=l+"px",d.style.left=s+"px"}}else{var u=R.cellSelect.x,c=R.cellSelect.y,f=document.getElementById("cell_"+u+"_"+c),p=f.offsetLeft,v=f.offsetTop,k=document.getElementById("sel");k.style.border="solid 1px yellow",k.style.visibility="visible",k.style.top=v+"px",k.style.left=p+"px"}x()}function A(){document.getElementById("sel").style.visibility="hidden"}function j(){document.getElementById("mapAct");if(0==R.viewMode){var t=R.worldSelect.x,e=R.worldSelect.y;if(-1==t||-1==e)return;var n=f.getBlockByPos(t,e),i=(n.data.id,n.data.ownBy),r=n.data.type;i==s.side()?0!=r&&99!=r?c[r].cell?F("建设地块","build",E,!1,n):F("地块信息","Info",S,!1,n):0==r&&F("分配建设类型","assign",O,!1):F("获取地块","conquer",L,!1),R.showBorder?F("隐藏边界","explore",I,!1):F("显示边界","explore",I,!1)}else{F("回到世界","back",P,!1);var a=R.worldSelect.x,o=R.worldSelect.y;if(-1==a||-1==o)return;var l=f.getBlockByPos(a,o),d=R.cellSelect.x,u=R.cellSelect.y;if(-1!=d&&-1!=u){var p=f.getCellByPos(l,d,u);-1!=p&&-1==p.data.build&&F("建造","build",N,!1,l,d,u)}}}function N(t,e,n){var i=document.getElementById("mengban"),r=document.getElementById("buildUI");document.getElementById("assignTitle").innerText="选择您需要建设的建筑";for(var a=document.getElementById("choiceArea");a.firstChild;)a.removeChild(a.firstChild);for(var o=t.data.type,s=p[o].length,l=void 0,d=function(i){var r=document.createElement("div");l=p[o][i],r.classList.add("choice"),r.style.top=8+2.5*i+"em",r.innerText="【"+u[l].name+"】",r.innerText+="："+u[l].desc,r.onclick=function(){f.buildByBlock(t,e,n,p[o][i]),T(),W(),V()},a.appendChild(r)},c=0;c<s;c++)d(c);i.style.visibility="visible",r.style.visibility="visible"}function V(){for(var t=document.getElementById("mapAct");t.firstChild;)t.removeChild(t.firstChild);j()}function F(t,e,n,i,r,a,o){var s=document.getElementById("mapAct"),l=document.createElement("button");l.classList.add("mapActBtn"),l.innerText=t,l.id=e,l.disabled=i,l.addEventListener("click",function(){n(r,a,o)}),s.appendChild(l)}document.onkeydown=function(){27==window.event.keyCode&&(A(),C())};var R=new b;e.default={mapView:R}},"77Pl":function(t,e,n){var i=n("EqjI");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},"7KvD":function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"7UMu":function(t,e,n){var i=n("R9M2");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"880/":function(t,e,n){t.exports=n("hJx8")},"94VQ":function(t,e,n){"use strict";var i=n("Yobk"),r=n("X8DO"),a=n("e6n0"),o={};n("hJx8")(o,n("dSzd")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},"9bBU":function(t,e,n){n("mClu");var i=n("FeBl").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},"A4+F":function(t,e){},B3SJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),r=n.n(i),a=n("bOdI"),o=n.n(a)()({day:1,year:1,month:1},"day",0),s=n("iPAz").default.propCtrl,l={init:function(){o.day=1,o.year=1,o.month=1,o.day=0,window.setInterval(l.refresh,1e3)},refresh:function(){o.day++;var t=Math.floor(o.day/10);t>0&&(o.day=0,l.addMonth(t))},remain:function(){return(10-o.day)/10},getTick:function(){return 12*o.year+o.month},addMonth:function(t){o.month=o.month+t,Math.floor(o.month/12)>0&&(o.month=1,o.year=o.year+1),s.month()},load:function(){try{var t=JSON.parse(localStorage.gameTime);t&&(o.day=t.day,o.hour=t.hour)}catch(t){l.init()}},new:function(){l.init()},save:function(){localStorage.gameTime=r()(o)}};e.default={gtime:l,gT:o}},BwfY:function(t,e,n){n("fWfb"),n("M6a0"),n("OYls"),n("QWe/"),t.exports=n("FeBl").Symbol},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},D2L2:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},EGZi:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},EqjI:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},FeBl:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},Hew6:function(t,e){},Ibhu:function(t,e,n){var i=n("D2L2"),r=n("TcQ7"),a=n("vFc/")(!1),o=n("ax3d")("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,d=[];for(n in s)n!=o&&i(s,n)&&d.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~a(d,n)||d.push(n));return d}},Kh4W:function(t,e,n){e.f=n("dSzd")},Kh5d:function(t,e,n){var i=n("sB3e"),r=n("PzxK");n("uqUo")("getPrototypeOf",function(){return function(t){return r(i(t))}})},LKZe:function(t,e,n){var i=n("NpIQ"),r=n("X8DO"),a=n("TcQ7"),o=n("MmMw"),s=n("D2L2"),l=n("SfB7"),d=Object.getOwnPropertyDescriptor;e.f=n("+E39")?d:function(t,e){if(t=a(t),e=o(e,!0),l)try{return d(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},M6a0:function(t,e){},MU5D:function(t,e,n){var i=n("R9M2");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},MmMw:function(t,e,n){var i=n("EqjI");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},O4g8:function(t,e){t.exports=!0},ON07:function(t,e,n){var i=n("EqjI"),r=n("7KvD").document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},OYls:function(t,e,n){n("crlp")("asyncIterator")},OvRC:function(t,e,n){t.exports={default:n("oM7Q"),__esModule:!0}},PKMK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={FSKL:[{id:0,name:"重击",icon:"01",desc:"对敌军单体发动一次强力的攻击（伤害率<>）和一次仙法攻击（伤害率<>，受仙法影响），2次攻击独立计算",base:"100<>90","":"4<>4",lb:1,lbp:1.5,maxLvl:10,type:1,eff:"[0,2]",prob:.8,probAdd:.015,target:2,range:2},{id:1,name:"鼓舞",icon:"01",desc:"鼓舞士气，持续3回合",base:"","":"",lb:1,lbp:1.5,maxLvl:10,type:0,eff:"[1]",prob:0,probAdd:0,target:1,range:2}],FSC:[{id:0,name:"重击",target:2,range:2,targetNum:1,eff:"[]",src:"atk",numType:0,basic:2,add:.04},{id:1,name:"鼓舞",target:1,range:2,targetNum:2,eff:"[0]",src:0,numType:0,basic:0,add:0},{id:2,name:"重击",target:2,range:2,targetNum:1,eff:"[]",src:"mtk",numType:1,basic:3.5,add:.04}],EFF:[{id:0,name:"鼓舞",round:2,attr:"atkp",base:10,psrc:4,source:"mtk",badd:3,padd:3}]}},Pf15:function(t,e,n){"use strict";e.__esModule=!0;var i=o(n("kiBT")),r=o(n("OvRC")),a=o(n("pFYg"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},PzxK:function(t,e,n){var i=n("D2L2"),r=n("sB3e"),a=n("ax3d")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},QRG4:function(t,e,n){var i=n("UuGF"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"QWe/":function(t,e,n){n("crlp")("observable")},R9M2:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},RPLV:function(t,e,n){var i=n("7KvD").document;t.exports=i&&i.documentElement},Rrel:function(t,e,n){var i=n("TcQ7"),r=n("n0T6").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}},S82l:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SfB7:function(t,e,n){t.exports=!n("+E39")&&!n("S82l")(function(){return 7!=Object.defineProperty(n("ON07")("div"),"a",{get:function(){return 7}}).a})},TcQ7:function(t,e,n){var i=n("MU5D"),r=n("52gC");t.exports=function(t){return i(r(t))}},UuGF:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},VGjY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={item:[{id:0,name:"金刚经",icon:"01",desc:"学习金刚心法",use:1,type:0,sub:0,stack:20,time:2,data1:0,data2:0},{id:1,name:"重击",icon:"01",desc:"重击",use:1,type:0,sub:0,stack:20,time:2,data1:1,data2:0}]}},X8DO:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XIw1:function(t,e,n){"use strict";e.a={fightRecord:{log:""}}},Xc4G:function(t,e,n){var i=n("lktj"),r=n("1kS7"),a=n("NpIQ");t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),l=a.f,d=0;s.length>d;)l.call(t,o=s[d++])&&e.push(o);return e}},Yobk:function(t,e,n){var i=n("77Pl"),r=n("qio6"),a=n("xnc9"),o=n("ax3d")("IE_PROTO"),s=function(){},l=function(){var t,e=n("ON07")("iframe"),i=a.length;for(e.style.display="none",n("RPLV").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[a[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=l(),void 0===e?n:r(n,e)}},ZPoG:function(t,e){},ZaQb:function(t,e,n){var i=n("EqjI"),r=n("77Pl"),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n("+ZMJ")(Function.call,n("LKZe").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},Zx67:function(t,e,n){t.exports={default:n("fS6E"),__esModule:!0}},Zzip:function(t,e,n){t.exports={default:n("/n6Q"),__esModule:!0}},aNJt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("wxAW"),r=n.n(i),a=n("Zrlr"),o=n.n(a),s=n("iPAz").default.propCtrl,l=n("e2vB").default.block,d=n("e2vB").default.typeName,u=n("birc").default.role,c=[],f=50,p=function t(e){o()(this,t),this.data={},this.data.x=e.x,this.data.y=e.y,this.data.idx=e.x*e.width+e.y,this.data.id=e.id,this.data.build=-1,this.data.status=-1},v=function(){function t(e){o()(this,t),this.select={x:-1,y:-1},this.data={},this.data.x=e.x,this.data.y=e.y,this.data.id=e.id,this.data.ownBy=0,this.data.cells=-1,this.data.idx=e.x*f+e.y,this.data.width=l[this.data.id].width,this.data.type=l[e.id].type,this.data.pop=0,this.data.hasCell=l[this.data.id].cell,this.data.worker=-1,this.data.product=0}return r()(t,[{key:"captureByUnit",value:function(t){var e=t.side();this.captureBySide(e)}},{key:"calProd",value:function(){var t=this.data.worker;if(-1==t)return 0;var e=s.get(u.side()).getWorkerNum(t),n=this.data.type;return e*d[n].workerAdd}},{key:"addWorker",value:function(t){var e=this.data.worker;s.get(u.side()).addWork(e,t)}},{key:"workerNum",value:function(){var t=this.data.worker;return s.get(u.side()).getWorkerNum(t)}},{key:"maxWorker",value:function(){return d[this.data.type].maxWorker}},{key:"captureBySide",value:function(t){if(t!=this.data.ownBy&&!(s.getV(t,"block")>=s.getV(t,"maxBlock"))){var e=this.data.ownBy;if(0!=e)s.get(e).delBlock(this.data.idx);s.get(t).addBlock(this.data.idx),this.data.ownBy=t}}},{key:"build",value:function(t,e,i){-1==this.data.cells&&this.createCell();var r=n("hjqR").default.conCtrl;-1==this.data.cells[t*this.data.width+e].data.build&&r.Build(this.data.idx,t,e,this.data.ownBy,i)}},{key:"createCell",value:function(){if(-1==this.data.cells&&this.data.hasCell){this.data.cells=[];for(var t=this.data.width,e=0;e<t;e++)for(var n=0;n<t;n++)this.data.cells[e*t+n]=new p({x:e,y:n,id:0,width:t})}}}]),t}(),h=new(function(){function t(){o()(this,t)}return r()(t,[{key:"getBlockByPos",value:function(t,e){return c[t*f+e]}},{key:"setBlockType",value:function(t,e,n){var i=this.getBlockByPos(t,e);if(0==i.data.type&&(i.data.type=n),1==d[i.data.type].work&&-1==i.data.worker){var r=s.get(u.side()).registerWork({type:0,idx:i.data.idx});i.data.worker=r}}},{key:"getCellByPos",value:function(t,e,n){var i=e*t.data.width+n;return-1==t.data.cells?-1:t.data.cells[i]}},{key:"getBlockByIdx",value:function(t){return c[t]}},{key:"build",value:function(t,e,n,i,r){this.getBlockByPos(t,e).build(n,i,r)}},{key:"buildByBlock",value:function(t,e,n,i){t.build(e,n,i)}},{key:"genMapAtPos",value:function(t,e,n){var i=0,r=100*Math.random();r>80?i=2:r>35&&r<=80?i=1:r>9&&r<=35?i=0:r>2&&r<=9?i=4:r<=2&&r>=0&&(i=6);var a=new v({x:t,y:e,id:i});c[a.data.idx]=a}},{key:"genMapArea",value:function(t,e,n){for(var i=t-n;i<=t+n;i++)for(var r=e-n;r<=e+n;r++)this.genMapAtPos(i,r,0)}},{key:"capturePosByUnit",value:function(t,e,n){this.getBlockByPos(t,e).captureByUnit(n)}},{key:"capturePosBySide",value:function(t,e,n){this.getBlockByPos(t,e).captureBySide(n)}}]),t}());e.default={mapCtrl:h}},ax3d:function(t,e,n){var i=n("e8AB")("keys"),r=n("3Eo+");t.exports=function(t){return i[t]||(i[t]=r(t))}},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("C4MV"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},birc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),a=n("wxAW"),o=n.n(a),s=n("uXnN").default.dft,l=n("iPAz").default.propCtrl,d=s.plySide,u=new(function(){function t(){r()(this,t)}return o()(t,[{key:"side",value:function(){return d}},{key:"gold",value:function(t){return l.get(d).gold()}},{key:"wood",value:function(){return l.getV(d,"wood")}},{key:"stone",value:function(){return l.getV(d,"stone")}},{key:"iron",value:function(){return l.getV(d,"iron")}},{key:"food",value:function(){return l.getV(d,"food")}},{key:"pop",value:function(){return l.getV(d,"pop")}},{key:"idle_pop",value:function(){return l.getV(d,"idle_pop")}},{key:"block",value:function(){return l.getV(d,"block")}},{key:"maxBlock",value:function(){return l.getV(d,"maxBlock")}},{key:"new",value:function(){}},{key:"save",value:function(){}},{key:"load",value:function(){}}]),t}());e.default={role:u,ui:{pnl:!1}}},crlp:function(t,e,n){var i=n("7KvD"),r=n("FeBl"),a=n("O4g8"),o=n("Kh4W"),s=n("evD5").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},dSzd:function(t,e,n){var i=n("e8AB")("wks"),r=n("3Eo+"),a=n("7KvD").Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},dwz5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={NG:[{id:0,name:"金刚心法",icon:"01",desc:"金刚心法",lb:3,lbp:1.5,eff:0,max:10,add:1,attr:'{"atk":1}'}]}},e2vB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[];i[0]={name:"未分配建设类型",desc:"这个地块还没有被分配建设类型，必须分配建设类型后才能进行建设，下面是可以分配的类型：",to:[1,2,3]},i[1]={name:"居民区",desc:"居民区可以建设居民区、市场、商店等，为居民提供住所和服务",to:[],img:[{pop:50,img:"3"},{pop:30,img:"2"},{pop:10,img:"1"},{pop:0,img:"0"}],cell:!0,work:!1},i[2]={name:"农业区",desc:"农业区可以建设农田、果园等，提供粮食",to:[],img:"01",maxWorker:15,minProduct:10,workerAdd:2,productType:"food",cell:!1,work:!0},i[3]={name:"手工业区",desc:"生产区可以建设工坊等建筑物，生产区会降低附近一格居民区的人气",to:[],work:!1},i[4]={name:"原材料产出区",to:[],work:!1},i[99]={name:"不可到达区",to:[],work:!1};e.default={block:[{id:0,name:"小片空地",desc:"这是一片小平原，有9个可建设的地块",enter:!0,type:0,img:"00",width:3,cell:!0},{id:1,name:"空地",desc:"这是一片平原，有16个可建设的地块",enter:!0,width:5,type:0,img:"00",cell:!0},{id:2,name:"大片空地",desc:"这是一片平原，有25个可建设的地块",enter:!0,width:7,type:0,img:"00",cell:!0},{id:3,name:"山脉",desc:"这是一片山脉，不可同行和建设。",enter:!1,width:0,type:99,img:"01",cell:!1},{id:4,name:"稀疏的树林",desc:"这是一片树林，有少量的树木",enter:!0,width:4,type:4,img:"02",cell:!1},{id:5,name:"树林",desc:"这是一片树林，有一些树木",enter:!0,width:4,type:4,img:"02",cell:!1},{id:6,name:"茂密树林",desc:"这是一片茂密的树林，有大量树木",enter:!0,width:5,type:4,img:"06",cell:!1}],cell:[{id:0,name:"平地",desc:"这是一片平地，可用于建设",build:!0,img:"00"},{id:1,name:"树木",desc:"这是一颗树木，可被伐木场手机",build:!1,img:"02"}],typeName:i}},e6n0:function(t,e,n){var i=n("evD5").f,r=n("D2L2"),a=n("dSzd")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},e8AB:function(t,e,n){var i=n("FeBl"),r=n("7KvD"),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("O4g8")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},evD5:function(t,e,n){var i=n("77Pl"),r=n("SfB7"),a=n("MmMw"),o=Object.defineProperty;e.f=n("+E39")?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},exh5:function(t,e,n){var i=n("kM2E");i(i.S,"Object",{setPrototypeOf:n("ZaQb").set})},fS6E:function(t,e,n){n("Kh5d"),t.exports=n("FeBl").Object.getPrototypeOf},fWfb:function(t,e,n){"use strict";var i=n("7KvD"),r=n("D2L2"),a=n("+E39"),o=n("kM2E"),s=n("880/"),l=n("06OY").KEY,d=n("S82l"),u=n("e8AB"),c=n("e6n0"),f=n("3Eo+"),p=n("dSzd"),v=n("Kh4W"),h=n("crlp"),y=n("Xc4G"),m=n("7UMu"),g=n("77Pl"),k=n("EqjI"),_=n("TcQ7"),w=n("MmMw"),b=n("X8DO"),x=n("Yobk"),B=n("Rrel"),C=n("LKZe"),S=n("evD5"),M=n("lktj"),E=C.f,P=S.f,I=B.f,O=i.Symbol,T=i.JSON,L=T&&T.stringify,z=p("_hidden"),W=p("toPrimitive"),A={}.propertyIsEnumerable,j=u("symbol-registry"),N=u("symbols"),V=u("op-symbols"),F=Object.prototype,R="function"==typeof O,D=i.QObject,G=!D||!D.prototype||!D.prototype.findChild,J=a&&d(function(){return 7!=x(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=E(F,e);i&&delete F[e],P(t,e,n),i&&t!==F&&P(F,e,i)}:P,K=function(t){var e=N[t]=x(O.prototype);return e._k=t,e},U=R&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},q=function(t,e,n){return t===F&&q(V,e,n),g(t),e=w(e,!0),g(n),r(N,e)?(n.enumerable?(r(t,z)&&t[z][e]&&(t[z][e]=!1),n=x(n,{enumerable:b(0,!1)})):(r(t,z)||P(t,z,b(1,{})),t[z][e]=!0),J(t,e,n)):P(t,e,n)},Q=function(t,e){g(t);for(var n,i=y(e=_(e)),r=0,a=i.length;a>r;)q(t,n=i[r++],e[n]);return t},Z=function(t){var e=A.call(this,t=w(t,!0));return!(this===F&&r(N,t)&&!r(V,t))&&(!(e||!r(this,t)||!r(N,t)||r(this,z)&&this[z][t])||e)},X=function(t,e){if(t=_(t),e=w(e,!0),t!==F||!r(N,e)||r(V,e)){var n=E(t,e);return!n||!r(N,e)||r(t,z)&&t[z][e]||(n.enumerable=!0),n}},Y=function(t){for(var e,n=I(_(t)),i=[],a=0;n.length>a;)r(N,e=n[a++])||e==z||e==l||i.push(e);return i},H=function(t){for(var e,n=t===F,i=I(n?V:_(t)),a=[],o=0;i.length>o;)!r(N,e=i[o++])||n&&!r(F,e)||a.push(N[e]);return a};R||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(V,n),r(this,z)&&r(this[z],t)&&(this[z][t]=!1),J(this,t,b(1,n))};return a&&G&&J(F,t,{configurable:!0,set:e}),K(t)}).prototype,"toString",function(){return this._k}),C.f=X,S.f=q,n("n0T6").f=B.f=Y,n("NpIQ").f=Z,n("1kS7").f=H,a&&!n("O4g8")&&s(F,"propertyIsEnumerable",Z,!0),v.f=function(t){return K(p(t))}),o(o.G+o.W+o.F*!R,{Symbol:O});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)p($[tt++]);for(var et=M(p.store),nt=0;et.length>nt;)h(et[nt++]);o(o.S+o.F*!R,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=O(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!R,"Object",{create:function(t,e){return void 0===e?x(t):Q(x(t),e)},defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:Y,getOwnPropertySymbols:H}),T&&o(o.S+o.F*(!R||d(function(){var t=O();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(k(e)||void 0!==t)&&!U(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!U(e))return e}),i[1]=e,L.apply(T,i)}}),O.prototype[W]||n("hJx8")(O.prototype,W,O.prototype.valueOf),c(O,"Symbol"),c(Math,"Math",!0),c(i.JSON,"JSON",!0)},fkB2:function(t,e,n){var i=n("UuGF"),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):a(t,e)}},fxuB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={wp:[{id:0,type:0,quality:0,name:"拳头",rg:!1,startWrd:"",atkWord:"出拳攻击",atkDis:2,idx:2,atk:0,mtk:0},{id:1,type:1,quality:0,name:"匕首",rg:!1,startWrd:"",atkWord:"挥动匕首，刺了出去",atkDis:2,idx:2,atk:25,mtk:0},{id:2,type:2,quality:0,name:"弓箭",rg:!0,startWrd:"开始蓄力拉弓",atkWord:"射出了一箭",atkDis:5,idx:0,atk:20,mtk:0}]}},h65t:function(t,e,n){var i=n("UuGF"),r=n("52gC");t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),l=i(n),d=s.length;return l<0||l>=d?t?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===d||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},hJx8:function(t,e,n){var i=n("evD5"),r=n("X8DO");t.exports=n("+E39")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},hjqR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),r=n.n(i),a=[],o=[],s={Build:function(t,e,i,a,s){var l=n("aNJt").default.mapCtrl,d=n("5yrw").default.mapView,u=l.getBlockByIdx(t);if(u.data.ownBy!=a)return-1;var c=u.data.cells[e*u.data.width+i];if(-1!=c.data.build)return-2;void 0==o[a]&&(o[a]=[]);var f=new function t(e){r()(this,t),this.data={},this.data.id=e.id,this.data.side=e.side,this.data.block_idx=e.block_idx,this.data.i=e.i,this.data.j=e.j,this.data.lv=0,this.data.pop=0,this.data.satisfy=!1,this.data.satisfy_time=0,this.data.hungry=0,this.data.noWorker=0,this.data.idx=0}({id:s,side:a,block_idx:t,i:e,j:i});o[a].push(f);var p=o[a].length-1;return o[a][p].data.idx=p,c.data.build=p,d.renderCell(t,e,i),0},getBuild:function(t,e){return o[t][e]},BuildConForce:function(t,e,n,i){},afterBuild:function(t,e,n,i){},canBuild:function(t,e,n,i){},getConByIdx:function(t){return a[t]}};e.default={conCtrl:s,builds:o}},"i/C/":function(t,e,n){n("exh5"),t.exports=n("FeBl").Object.setPrototypeOf},iPAz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("Zrlr"),a=n.n(r),o=n("wxAW"),s=n.n(o),l=n("uXnN").default.dft,d=n("pOLX").default.construct,u=n("e2vB").default.typeName,c=[],f=function(){function t(e){a()(this,t),this.data={side:e.side,name:"",gold:e.gold,wood:e.wood,food:e.food,iron:e.iron,stone:e.stone,pop:0,idle_pop:0,maxBlock:5,block:0,blockList:[],work_pop:0,work:[]}}return s()(t,[{key:"registerWork",value:function(t){for(var e=0;e<n;e++)if(-1==this.data.work[e])return this.data.work[e]={type:t.type,worker:0,idx:t.idx},e;var n=this.data.work.length;return this.data.work.push({type:t.type,worker:0,idx:t.idx}),n}},{key:"getWorkerNum",value:function(t){return this.data.work[t].worker}},{key:"unregisterWork",value:function(t){var e=this.data.work[t].worker;this.data.work_pop-=e,this.data.idle_pop+=e,this.data.work[t]=-1}},{key:"addWork",value:function(t,e){if(e>=0){if(this.data.idle_pop<=0)return;var i=e>this.data.idle_pop&&this.data.idle_pop,r=999;if(0==this.data.work[t].type)if(r=n("aNJt").default.mapCtrl.getBlockByIdx(this.data.work[t].idx).maxWorker(),this.data.work[t].worker>=r)return;i=e>=r-this.data.work[t].worker?r-this.data.work[t].worker:e,this.data.work[t].worker+=i,this.data.work_pop+=i,this.data.idle_pop-=i}else{var a;a=e>this.data.work[t].worker?this.data.work[t].worker:e,this.data.work[t].worker-=a,this.data.work_pop-=a,this.data.idle_pop+=a}}},{key:"addBlock",value:function(t){this.data.blockList.push(t)}},{key:"delBlock",value:function(t){var e=this.data.blockList.indexOf(t);e>-1&&this.data.blockList.splice(e,1)}},{key:"gold",value:function(t){if(void 0==t)return this.data.gold;this.data.gold=t}},{key:"iron",value:function(t){if(void 0==t)return this.data.iron;this.data.iron=t}},{key:"food",value:function(t){if(void 0==t)return this.data.food;this.data.food=t}},{key:"wood",value:function(t){if(void 0==t)return this.data.wood;this.data.wood=t}},{key:"idle_pop",value:function(){return this.data.idle_pop}},{key:"stone",value:function(t){if(void 0==t)return this.data.stone;this.data.stone=t}},{key:"ad",value:function(t,e){var n=this.data[t];n+=e,this.data[t]=n}},{key:"onMonth",value:function(){var t=this.data.blockList.length;if(!(t<=0)){var e=n("hjqR").default.builds,i=n("aNJt").default.mapCtrl,r=n("5yrw").default.mapView,a=void 0,o=void 0,s=void 0,l=void 0;this.data.pop=0;for(var d=0;d<t;d++){if(a=this.data.blockList[d],1==(o=i.getBlockByIdx(a)).data.type&&-1!=o.data.cells){o.data.pop=0,s=o.data.cells.length;for(var c=0;c<s;c++)-1!=(l=o.data.cells[c].data.build)&&this.procBuild(e[this.data.side][l],o)}}if(this.data.pop>=this.data.work_pop)this.data.idle_pop=this.data.pop-this.data.work_pop;else{this.data.idle_pop=0;for(var f=this.data.work.length,p=void 0,v=0;v<f;v++)if(-1!=this.data.work[v]){if(p=this.data.work[v].worker,this.data.work_pop-this.data.pop<p){var h=this.data.work_pop-this.data.pop;this.data.work[v].worker-=h,this.data.work_pop-=h;break}this.data.work[v].worker=0,this.data.work_pop-=p}}for(var y=0;y<t;y++){a=this.data.blockList[y];var m=(o=i.getBlockByIdx(a)).data.type;if(2==m){var g=u[m].productType,k=o.calProd();o.data.product=k,this.ad(g,k)}}r.renderSelTip()}}},{key:"procBuild",value:function(t,e){var i=!1,r=n("5yrw").default.mapView;0==d[t.data.id].type&&(i=this.procMinJu(t,e)),i&&r.renderCell(e.data.idx,t.data.i,t.data.j),r.renderBuild(e)}},{key:"procMinJu",value:function(t,e){for(var n=t.data.lv,i=t.data.id,r=d[i].lvl,a=!1,o=!0,s=0;s<r[n].consume.length;s++){var l=r[n].consume[s].type,u=r[n].consume[s].num;if(!(this.data[l]>=u*t.data.pop)){o=!1;break}this.ad(l,-1*u*t.data.pop),this.data.food<=0&&(o=!1)}if(o){t.data.satisfy?t.data.satisfy_time++:t.data.satisfy_time=0,t.data.satisfy=o;var c=t.data.pop,f=d[i].lvl[n].max;if(c<f){var p=Math.floor(Math.random()*(f-c+1));t.data.pop+=p}else{if(n<r.length-1&&t.data.satisfy_time>=r[n].upg_wait)if(100*Math.random()<=r[n].upg_prop){for(var v=!0,h=0;h<r[n].upgrade.length;h++){var y=r[n].upgrade[h].type,m=r[n].upgrade[h].num;if(this.data[y]<m){v=!1;break}}if(v){for(var g=0;g<r[n].upgrade.length;g++){var k=r[n].upgrade[g].type,_=r[n].upgrade[g].num;this.ad(k,-1*_)}t.data.lv++,a=!0;var w=d[i].lvl[t.data.lv].max,b=Math.random(),x=Math.ceil(b*(w-t.data.pop));t.data.pop+=x}}}}else t.data.satisfy?t.data.satisfy_time=0:t.data.satisfy_time++,t.data.satisfy=!1,t.data.satisfy_time>=2&&(t.data.pop>r[n].down_pop?t.data.pop--:(t.data.lv--,a=!0));return e.data.pop+=t.data.pop,this.data.pop+=t.data.pop,this.ad("gold",r[n].tax*t.data.pop),a}},{key:"recal",value:function(t){}}]),t}(),p=new(function(){function t(){a()(this,t)}return s()(t,[{key:"create",value:function(t,e){if(void 0==c[t]){var n=new f(e);c[t]=n}}},{key:"month",value:function(){for(var t=c.length,e=0;e<t;e++)void 0!=c[e]&&c[e].onMonth()}},{key:"getV",value:function(t,e){return c[t].data[e]}},{key:"get",value:function(t){return c[t]}}]),t}());i=l.plySide,p.create(i,l.res),e.default={propCtrl:p,propList:c}},iyHj:function(t,e){},kM2E:function(t,e,n){var i=n("7KvD"),r=n("FeBl"),a=n("+ZMJ"),o=n("hJx8"),s=n("D2L2"),l=function(t,e,n){var d,u,c,f=t&l.F,p=t&l.G,v=t&l.S,h=t&l.P,y=t&l.B,m=t&l.W,g=p?r:r[e]||(r[e]={}),k=g.prototype,_=p?i:v?i[e]:(i[e]||{}).prototype;for(d in p&&(n=e),n)(u=!f&&_&&void 0!==_[d])&&s(g,d)||(c=u?_[d]:n[d],g[d]=p&&"function"!=typeof _[d]?n[d]:y&&u?a(c,i):m&&_[d]==c?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):h&&"function"==typeof c?a(Function.call,c):c,h&&((g.virtual||(g.virtual={}))[d]=c,t&l.R&&k&&!k[d]&&o(k,d,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},kiBT:function(t,e,n){t.exports={default:n("i/C/"),__esModule:!0}},lOnJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},lktj:function(t,e,n){var i=n("Ibhu"),r=n("xnc9");t.exports=Object.keys||function(t){return i(t,r)}},mClu:function(t,e,n){var i=n("kM2E");i(i.S+i.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},n0T6:function(t,e,n){var i=n("Ibhu"),r=n("xnc9").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},n4Ry:function(t,e){},oM7Q:function(t,e,n){n("sF+V");var i=n("FeBl").Object;t.exports=function(t,e){return i.create(t,e)}},pFYg:function(t,e,n){"use strict";e.__esModule=!0;var i=o(n("Zzip")),r=o(n("5QVw")),a="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}},pOLX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={names:{food:"谷物",wood:"木材",iron:"生铁",stone:"石头",animal:"动物",wood_commodity:"木质日用品",meat:"肉食",iron_commodity:"铁质日用品",bread:"面包"},construct:[{id:0,name:"居民区",desc:"居民区会吸引市民来居住。居民提供税收和劳动力。如果附近居住水平提升的话，会吸引更富有的人和更多的居民来居住。但富有的人也消耗更多的资源。",cost:0,img:"village_0",type:0,lvl:[{lv:0,name:"居民区空地",max:0,consume:[],upgrade:[{type:"wood",num:0},{type:"stone",num:0},{type:"food",num:1}],upg_wait:0,upg_prop:200,img:"00_00",down_pop:0,tax:0},{lv:1,name:"帐篷",max:1,consume:[{type:"food",num:1}],upgrade:[{type:"wood",num:10},{type:"stone",num:10},{type:"food",num:1}],upg_wait:2,upg_prop:80,img:"00_01",down_pop:0,tax:1},{lv:2,name:"简陋的房屋",max:4,consume:[{type:"food",num:1}],upgrade:[{type:"wood",num:10},{type:"stone",num:10},{type:"gold",num:10},{type:"food",num:1}],upg_wait:4,upg_prop:50,img:"00_02",down_pop:2,tax:1}]},{id:1,name:"市场",desc:"市场为附近3格的居民提供更多样化的食物，如果没有市场，居民区只会出现贫民住帐篷。",cost:0,img:"market_0",type:4,work:{num:5}},{id:2,name:"用品店",desc:"用品店为附近2格的居民提供日用品，提升居民生活水平。用品店需要至少5个人才能运作。",cost:0,img:"yongpin_0",type:3,work:{num:5,give:20,type:"wood_commodity"}},{id:3,name:"农田",desc:"农田提供粮食，每块农田至少需要10个人才能运作。",cost:20,img:"crop_0",type:2,work:{num:10,give:20,type:"food"}},{id:4,name:"伐木场",desc:"伐木场从附近1格以内的树木收集木材，每个树林只能被一个伐木场收集，每个伐木场至少需要10人才能运作。",cost:20,img:"wood_0",type:2,work:{worker:10,give:10,type:"wood"}},{id:5,name:"采石场",desc:"采石场从原地挖坑收集石头",need:"需要平原",gold:20,area:0,img:"caishichang_0",type:2,work:{worker:5,max:100,type:"stone"}},{id:6,name:"铁矿场",desc:"铁矿场从附近1格以内的铁矿收集铁，每个铁矿只能被1个铁矿场收集",need:"需要平原",gold:20,area:0,img:"tiekuangc_0",type:2,work:{worker:5,max:100,type:"iron"}},{id:7,name:"面包房",desc:"面包房从附近的粮仓获得面粉，加工为面包",need:"需要平原",gold:20,area:0,img:"mianbao",type:3,work:{worker:5,max:10,type:"bread"}},{id:8,name:"工坊",desc:"工坊从附近的仓库获取木材，加工为一般木质日用品",need:"需要平原",gold:20,area:0,img:"gongfang_0",type:3,work:{worker:5,max:10,type:"wood_commodity"}},{id:9,name:"铁匠铺",desc:"铁匠铺从附近的仓库收集生铁，加工为铁质日用品，或武器防具",need:"需要平原",gold:20,area:2,img:"tiejiangpu_0",type:3,work:{worker:5,max:10,type:"iron_commodity"}},{id:10,name:"酒馆",desc:"酒馆为附近居民区娱乐，并且可以在这里遇见英雄",need:"需要平原",gold:200,area:2,img:"jiuguan_0",type:4},{id:11,name:"医院",desc:"医院为英雄及市民进行质量",need:"需要平原",gold:200,area:2,img:"yiyuan_0",type:4},{id:12,name:"花园",desc:"花园为附近居民区提供更好的景观和娱乐",need:"需要平原",gold:200,area:2,img:"garden_0",type:4}],cons_sheet:[[],[0,1,2],[],[]]}},qio6:function(t,e,n){var i=n("evD5"),r=n("77Pl"),a=n("lktj");t.exports=n("+E39")?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,l=0;s>l;)i.f(t,n=o[l++],e[n]);return t}},qkKv:function(t,e,n){var i=n("FeBl"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},sB3e:function(t,e,n){var i=n("52gC");t.exports=function(t){return Object(i(t))}},"sF+V":function(t,e,n){var i=n("kM2E");i(i.S,"Object",{create:n("Yobk")})},tF5I:function(t,e){},tY3V:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zx67"),r=n.n(i),a=n("zwoO"),o=n.n(a),s=n("Pf15"),l=n.n(s),d=n("Zrlr"),u=n.n(d),c=n("wxAW"),f=n.n(c),p=n("wFRd").default.Fight,v=n("fxuB").default.wp,h=n("PKMK").default.FSKL,y=n("dwz5").default.npc,m=n("VGjY").default.item,g=n("dwz5").default.NG,k=function(){function t(){u()(this,t),this.attr={id:0,idx:0,head:"",name:"",type:0,weapon:0,hp:0,atkBase:0,mtkBase:0,defBase:0,spdBase:0,hpmaxBase:0,fskl:[-1,-1,-1],zf:[],tx:[],ng:[],cl:{type:-1,index:0},pos:{x:0,y:0,m:0},side:0,gold:0},this.cal={hpmax:0,atk:0,mtk:0,spd:0,def:0},this.ng={atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ft={round:0,eff:[],atk:0,mtk:0,spd:0,def:0,atkp:0,mtkp:0,spdp:0,defp:0},this.ftOn=!1}return f()(t,[{key:"ftInit",value:function(){this.ft.atk=0,this.ft.mtk=0,this.ft.spd=0,this.ft.def=0,this.ft.atkp=0,this.ft.mtkp=0,this.ft.spdp=0,this.ft.defp=0}},{key:"idx",value:function(t){if(void 0==t)return this.getAttr("idx");this.setAttr("idx",t)}},{key:"gold",value:function(t){if(void 0==t)return this.getAttr("gold");this.setAttr("gold",t)}},{key:"id",value:function(t){if(void 0==t)return this.getAttr("id");this.setAttr("id",t)}},{key:"side",value:function(t){if(void 0==t)return this.getAttr("side");this.setAttr("side",t)}},{key:"type",value:function(t){if(void 0==t)return this.getAttr("type");this.setAttr("type",t)}},{key:"weapon",value:function(t){if(void 0==t)return this.getAttr("weapon");this.setAttr("weapon",t)}},{key:"head",value:function(t){if(void 0==t)return this.getAttr("head");this.setAttr("head",t)}},{key:"hp",value:function(t){if(void 0==t)return this.getAttr("hp");this.setAttr("hp",t)}},{key:"name",value:function(t){if(void 0==t)return this.getAttr("name");this.setAttr("name",t)}},{key:"pos",value:function(t){if(!t)return this.getAttr("pos");this.attr.pos.x=t.x,this.attr.pos.y=t.y}},{key:"moveTo",value:function(t,e){}},{key:"setPos",value:function(t,e){}},{key:"fskl",value:function(){return this.getAttr("fskl")}},{key:"attrCheck",value:function(){var t=this.attr.atkBase,e=this.attr.mtkBase,n=this.attr.hpmaxBase,i=this.attr.spdBase,r=this.attr.defBase;t+=v[this.weapon()].atk,t+=this.ng.atk,e+=this.ng.mtk,i+=this.ng.spd,r+=this.ng.def,t*=1+this.ng.atkp/100,e*=1+this.ng.mtkp/100,i*=1+this.ng.spdp/100,r*=1+this.ng.defp/100,this.ftOn&&(t+=this.ft.atk,e+=this.ft.mtk,i+=this.ft.spd,r+=this.ft.def,t*=1+this.ft.atkp/100,e*=1+this.ft.mtkp/100,i*=1+this.ft.spdp/100,r*=1+this.ft.defp/100),this.setCal("atk",t),this.setCal("mtk",e),this.setCal("hpmax",n),this.setCal("spd",i),this.setCal("def",r)}},{key:"addToFtByIdx",value:function(t){if(void 0!=this.attr.zf[t])for(var e=0;e<3;e++)if(this.attr.fskl[e]<0)return void(this.attr.fskl[e]=t)}},{key:"addToFtByIdxPos",value:function(t,e){for(var n=0;n<3;n++)this.attr.fskl[n]==t&&e!=n&&(this.attr.fskl[n]=-1);this.attr.fskl[e]=t}},{key:"addToFtById",value:function(t){if(h[t]){var e=this.attr.zf.length;if(!(e<1))for(var n=-1,i=0;i<e;i++)if(this.attr.zf[i].id==t){n=i;for(var r=0;r<3;r++)if(this.attr.fskl[r]<0)return void(this.attr.fskl[r]=n)}}}},{key:"delFtByIdx",value:function(t){this.attr.fskl[t]=-1}},{key:"delFtByPos",value:function(t){this.attr.fskl[t-1]=-1}},{key:"absorbJS",value:function(t){var e=m[t];if(e){var n=e.data1;if(0==n){var i=e.data2;return this.findNg(i)>=0?-1:(this.addNg(i),1)}if(1==n){i=e.data2;return this.findZf(i)>=0?-1:(this.addZf(i),1)}}return-1}},{key:"findNg",value:function(t){var e=this.attr.ng.length,n=0;for(n=0;n<e;n++)if(this.attr.ng[n].id==t)return n;return-1}},{key:"findZf",value:function(t){var e=this.attr.zf.length,n=0;for(n=0;n<e;n++)if(this.attr.zf[n].id==t)return n;return-1}},{key:"addZf",value:function(t){this.findZf(t)>=0||this.attr.zf.length>=20||this.attr.zf.push({id:t,lv:1,study:0})}},{key:"addNg",value:function(t){this.findNg(t)>=0||this.attr.ng.length>=32||(this.attr.ng.push({id:t,lv:1,study:0}),this.ngRecal(),this.attrCheck())}},{key:"ngInit",value:function(){var t;for(t in this.ng)this.ng[t]=0}},{key:"ngAddLv",value:function(t){var e=this.findNg(t);if(e>=0){var n=this.attr.ng[e];return n.lv++,n.study=0,this.ngRecal(),this.attrCheck(),n.lv}return-1}},{key:"zfAddLv",value:function(t){var e=this.findZf(t);if(e>=0){var n=this.attr.zf[e];return n.lv++,n.study=0,n.lv}return-1}},{key:"ngRecal",value:function(){var t=this.attr.ng.length;if(!(t<=0)){this.ngInit();var e,n,i,r,a,o=0,s=0;for(o=0;o<t;o++)for(a in n=(e=this.attr.ng[o]).id,i=e.lv,r=JSON.parse(g[n].attr),s=(i-1)*g[n].add,r)this.ng[a]+=r[a],this.ng[a]+=s}}},{key:"onMonthStep",value:function(){var t=this.attr.cl;if(0==t.type){var e=t.index,n=this.attr.ng[e];n.study++;var i=n.lv,r=n.id,a=g[r].lb,o=g[r].lbp,s=Math.ceil(a+Math.pow(o,i));n.study>=s&&this.ngAddLv(r)}if(1==t.type){e=t.index;var l=this.attr.zf[e];l.study++;i=l.lv,r=l.id,a=h[r].lb,o=h[r].lbp,s=Math.ceil(a+Math.pow(o,i));l.study>=s&&this.zfAddLv(r)}}},{key:"changeStudy",value:function(t,e){this.attr.cl.index=e,this.attr.cl.type=t}},{key:"getAttr",value:function(t){return this.attr[t]}},{key:"setAttr",value:function(t,e){this.attr[t]=e,this.onSetAttr(t,e)}},{key:"getCal",value:function(t){return this.cal[t]}},{key:"setCal",value:function(t,e){this.cal[t]=e,this.onSetcal(t,e)}},{key:"atkDis",value:function(){return v[this.weapon()].atkDis}},{key:"atk",value:function(){return this.getCal("atk")}},{key:"mtk",value:function(){return this.getCal("mtk")}},{key:"def",value:function(){return this.getCal("def")}},{key:"spd",value:function(){return this.getCal("spd")}},{key:"hpmax",value:function(){return this.getCal("hpmax")}},{key:"damage",value:function(t){var e=this.hp();return(e-=t)<=0?(this.hp(0),-1):(this.hp(e),1)}},{key:"addAttr",value:function(t,e){var n=this.getAttr(t)+e;this.setAttr(t,n)}},{key:"equipWp",value:function(t){0==p.over&&(this.setAttr("weapon",t),this.attrCheck(),this.onEqWp(t))}},{key:"unEquipWp",value:function(){0==p.over&&(this.setAttr("weapon",0),this.attrCheck(),this.onEqWp(0))}},{key:"onEqWp",value:function(t){}},{key:"onUnEqWp",value:function(){}},{key:"onSetAttr",value:function(t,e){}},{key:"onSetcal",value:function(t,e){}}]),t}(),_={Unit:k,Npc:function(t){function e(t,n){u()(this,e);var i=o()(this,(e.__proto__||r()(e)).call(this));return i.id(t),i.weapon(n),i.attrInit(),i.attrCheck(),i.name(y[t].name),i}return l()(e,t),f()(e,[{key:"attrInit",value:function(){var t=this.id(),e=y[t].attr,n=e.hp,i=e.atk,r=e.mtk,a=e.def,o=e.spd;this.setAttr("hp",n),this.setAttr("hpmaxBase",n),this.setAttr("atkBase",i),this.setAttr("mtkBase",r),this.setAttr("spdBase",o),this.setAttr("defBase",a)}}]),e}(k),unitCtrl:{npcName:function(t){return y[t].name}}},w=n("birc"),b=n("wFRd"),x=n("XIw1").a.fightRecord,B=(w.default.role,b.default.Fight);var C={name:"fightPnl",data:function(){return{showClose:B.showClose,info:x,show:B.showPnl}},computed:{},created:function(){},mounted:function(){},methods:{close:function(){B.closeUI()}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show.v?n("div",[n("div",{staticClass:"md bd"}),t._v(" "),n("div",{staticClass:"fp bframe"},[n("textarea",{staticClass:"msg",attrs:{name:"",id:"ftMsg",rows:"13",readonly:""}},[t._v(t._s(t.info.log))]),t._v(" "),t.showClose.v?n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]):t._e()])]):t._e()},staticRenderFns:[]};var M=n("VU/8")(C,S,!1,function(t){n("Hew6")},"data-v-339375ae",null).exports,E=n("PKMK"),P=n("VGjY"),I=n("dwz5"),O=E.default.FSKL,T=w.default.role,L=w.default.ui,z=P.default.item,W=I.default.NG,A={name:"plyPnl",data:function(){return{player:T,show:L,sel:1,zfPnl:!1,cuFtIdx:-1}},computed:{bag:function(){return this.player.bag()},ngList:function(){return this.player.attr.ng},fsl:function(){return this.player.attr.fskl},zfList:function(){return this.player.attr.zf},name:function(){return this.player.name()},hpmax:function(){return this.player.hpmax()},hp:function(){return this.player.hp()},atk:function(){return this.player.atk()},mtk:function(){return this.player.mtk()},def:function(){return this.player.def()},spd:function(){return this.player.spd()},learning:function(){return-1!=this.player.attr.cl.type},clTime:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;if(0==t){var n=this.player.attr.ng[e],i=n.lv,r=n.id,a=W[r].lb,o=W[r].lbp,s=Math.ceil(a+Math.pow(o,i));return(n.study/s*100).toFixed(0)+"%"}if(1==t){console.log("idx="+e);var l=this.player.attr.zf[e];i=l.lv,r=l.id,a=O[r].lb,o=O[r].lbp,s=Math.ceil(a+Math.pow(o,i));return(l.study/s*100).toFixed(0)+"%"}},yxLv:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;return 0==t?this.player.attr.ng[e].lv:1==t?(console.log("idx="+e),this.player.attr.zf[e].lv):void 0}},methods:{close:function(){this.zfPnl=!1,this.show.pnl=!1},itemName:function(t){var e=this.bag[t].id;return z[e].name},itemNum:function(t){return this.bag[t].stack},useItem:function(t){this.player.bagUseItem(t)},itemIcon:function(t){var e=this.bag[t].id;return"/static/img/mlGame/item_"+z[e].icon+".png"},psel:function(t){this.sel=t},ngName:function(t){var e=this.player.attr.ng[t].id;return W[e].name},ngIcon:function(t){var e=this.player.attr.ng[t].id;return"/static/img/mlGame/ng_"+W[e].icon+".png"},zfName:function(t){var e=this.player.attr.zf[t].id;return O[e].name},zfLv:function(t){return this.player.attr.zf[t].lv},ngLv:function(t){return this.player.attr.ng[t].lv},szzfName:function(t){var e=this.player.attr.fskl[t],n=this.player.attr.zf[e].id;return O[n].name},szzfLv:function(t){var e=this.player.attr.fskl[t];return this.player.attr.zf[e].lv},zfIcon:function(t){var e=this.player.attr.zf[t].id;return"/static/img/mlGame/zf_"+O[e].icon+".png"},skIcon:function(t){var e=this.player.attr.fskl[t],n=this.player.attr.zf[e].id;return"/static/img/mlGame/zf_"+O[n].icon+".png"},study:function(t,e){this.player.changeStudy(t,e)},clIcon:function(){var t=this.player.attr.cl.type,e=this.player.attr.cl.index;if(0==t){var n=this.player.attr.ng[e].id;return"/static/img/mlGame/ng_"+W[n].icon+".png"}if(1==t){n=this.player.attr.zf[e].id;return"/static/img/mlGame/zf_"+O[n].icon+".png"}},openZfPnl:function(t){this.cuFtIdx=t,this.zfPnl=!0},zfSel:function(t){this.player.addToFtByIdxPos(t,this.cuFtIdx),this.zfPnl=!1}}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show.pnl?n("div",[n("div",{staticClass:"md bd"}),t._v(" "),n("div",{staticClass:"topBar"},[n("div",{staticClass:"btn",class:{active:1==t.sel},on:{click:function(e){t.psel(1)}}},[t._v("\n\t\t\t基本信息\n\t\t")]),t._v(" "),n("div",{staticClass:"btn",class:{active:3==t.sel},on:{click:function(e){t.psel(3)}}},[t._v("\n\t\t\t所有战法\n\t\t")]),t._v(" "),n("div",{staticClass:"btn",class:{active:2==t.sel},on:{click:function(e){t.psel(2)}}},[t._v("\n\t\t\t技艺/内功\n\t\t")])]),t._v(" "),n("div",{staticClass:"box"},[t.zfPnl?n("div",{staticClass:"zfSelPnl"},[n("div",{staticClass:"txt"},[t._v("全部战法")]),t._v(" "),n("div",{staticClass:"contain"},t._l(t.zfList,function(e,i){return n("div",{key:i},[n("div",{staticClass:"left cell",attrs:{id:"zf_"+i},on:{click:function(e){t.zfSel(i)}}},[n("img",{staticClass:"pic",attrs:{src:t.zfIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.zfName(i))+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.zfLv(i))+"\n\t\t\t\t\t\t")])])])})),t._v(" "),n("button",{staticClass:"clo",on:{click:function(e){t.zfPnl=!1}}},[t._v("关闭")])]):t._e(),t._v(" "),1==t.sel?n("div",[n("div",{staticClass:"attr"},[n("div",{staticClass:"tit"},[t._v("\n\t\t\t\t\t基本属性\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"con"},[n("div",{staticClass:"lcon"},[n("p",[t._v("生命："+t._s(t.hp)+"/"+t._s(t.hpmax))]),t._v(" "),n("p",[t._v("悟性：0")]),t._v(" "),n("p",[t._v("速度："+t._s(t.spd))])]),t._v(" "),n("div",{staticClass:"rcon"},[n("p",[t._v("攻击："+t._s(t.atk))]),t._v(" "),n("p",[t._v("仙法："+t._s(t.mtk))]),t._v(" "),n("p",[t._v("防御力："+t._s(t.def))])])])]),t._v(" "),n("div",{staticClass:"szzf"},[n("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t上阵战法\n\t\t\t\t")]),t._v(" "),t._l(t.fsl,function(e,i){return n("div",{key:i,staticClass:"left cell",on:{click:function(e){t.openZfPnl(i)}}},[e<0?n("div",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t空\n\t\t\t\t\t")]):n("div",[n("img",{staticClass:"pic",attrs:{src:t.skIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v(t._s(t.szzfName(i)))]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.szzfLv(i))+"\n\t\t\t\t\t\t")])])])})],2),t._v(" "),n("div",{staticClass:"cl"},[n("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t研习中\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"cell"},[t.learning?n("div",[n("img",{staticClass:"pic",attrs:{src:t.clIcon()}}),t._v(" "),n("div",{staticClass:"time"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.clTime)+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"yxlv"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.yxLv)+"\n\t\t\t\t\t\t")])]):n("div",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t空\n\t\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"bagttl"},[t._v("\n\t\t\t\t背包\n\t\t\t")]),t._v(" "),n("div",{staticClass:"bag"},t._l(t.bag,function(e,i){return n("div",{key:i,staticClass:"left",on:{click:function(e){t.useItem(i)}}},[n("div",{staticClass:"item",attrs:{id:"bag_"+i}},[n("div",{staticClass:"picf"},[n("img",{staticClass:"pic",attrs:{src:t.itemIcon(i)}})]),t._v(" "),n("div",{staticClass:"num"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.itemNum(i))+"\n\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.itemName(i))+"\n\t\t\t\t\t\t")])])])}))]):t._e(),t._v(" "),2==t.sel?n("div",{staticClass:"ng"},t._l(t.ngList,function(e,i){return n("div",{key:i,staticClass:"left"},[n("div",{staticClass:"cell",attrs:{id:"ng_"+i},on:{click:function(e){t.study(0,i)}}},[n("img",{staticClass:"pic",attrs:{src:t.ngIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t"+t._s(t.ngName(i))+"\n\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t"+t._s(t.ngLv(i))+"\n\t\t\t\t\t")])])])})):t._e(),t._v(" "),3==t.sel?n("div",{staticClass:"ng"},t._l(t.zfList,function(e,i){return n("div",{key:i,staticClass:"left"},[n("div",{staticClass:"cell",attrs:{id:"zf_"+i},on:{click:function(e){t.study(1,i)}}},[n("img",{staticClass:"pic",attrs:{src:t.zfIcon(i)}}),t._v(" "),n("div",{staticClass:"szName"},[t._v("\n\t\t\t\t\t\t"+t._s(t.zfName(i))+"\n\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"lv"},[t._v("\n\t\t\t\t\t\t"+t._s(t.zfLv(i))+"\n\t\t\t\t\t")])])])})):t._e(),t._v(" "),n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")])])]):t._e()},staticRenderFns:[]};var N=n("VU/8")(A,j,!1,function(t){n("tF5I")},"data-v-dda81dfe",null).exports;var V=n("fxuB").default.wp,F=_.Player,R={str:"强壮",agi:"敏捷"},D={name:"wpDesc",data:function(){return{wp:F.weapon,ply:F.attr}},computed:{n:function(){return V[this.wp.id].name},atk:function(){return V[this.wp.id].atk},ka:function(){return R[V[this.wp.id].ka]},kaa:function(){return 100*V[this.wp.id].kaa},dis:function(){return V[this.wp.id].atkDis},aspd:function(){return.5*V[this.wp.id].aspd},add:function(){return Math.ceil(V[this.wp.id].atk*(1+this.ply[V[this.wp.id].ka].value*V[this.wp.id].kaa))-V[this.wp.id].atk},rg:function(){return V[this.wp.id].rg?"远程武器":"近程武器"}},methods:{close:function(){this.$emit("clsWp")}}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bx bframe"},[n("h2",[t._v("[ "+t._s(t.n)+" ]")]),t._v(" "),n("p",[t._v("- "+t._s(t.rg)+" -")]),t._v(" "),n("p",[t._v("攻击力："),n("b",[t._v(t._s(t.atk)+"+"),n("label",{staticClass:"add"},[t._v(t._s(t.add))])])]),t._v(" "),n("p",[t._v("主要属性："+t._s(t.ka)+"（每点"+t._s(t.ka)+"提升 "+t._s(t.kaa)+"% 攻击力）")]),t._v(" "),n("p",[t._v("攻击距离："+t._s(t.dis)+" 米")]),t._v(" "),n("p",[t._v("攻击速度：每 "+t._s(t.aspd)+" 秒攻击一次")]),t._v(" "),n("button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")])])},staticRenderFns:[]};var J=n("VU/8")(D,G,!1,function(t){n("40Tq")},"data-v-410933b9",null).exports,K=n("B3SJ"),U=(n("uXnN").default.data,K.default.gT),q=n("B3SJ").default.gtime,Q={name:"tiv",data:function(){return{ti:U}},computed:{year:function(){return this.ti.year},m:function(){return this.ti.month},meter:function(){return 1.5*(1-q.remain())}},methods:{}},Z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",[t._v("第 "+t._s(t.year)+" 年 "+t._s(Math.floor(t.m))+" 月 ")]),t._v(" "),n("div",{staticClass:"meter"},[n("div",{staticClass:"base"}),t._v(" "),n("div",{staticClass:"up",style:{height:t.meter+"em"}})])])},staticRenderFns:[]};var X=n("VU/8")(Q,Z,!1,function(t){n("ZPoG")},"data-v-1c11ee78",null).exports,Y=n("mvHQ"),H=n.n(Y),$=b.default.Fight,tt=w.default.role,et=[{u:0,ply:!1},{u:0,ply:!1},{u:0,ply:!1}],nt={new:function(){et[0].u=tt,et[0].ply=!0},load:function(){try{var t=JSON.parse(localStorage.zhenxing);if(t)for(var e=0;e<et.length;e++)et[e].u=t[e].u,et[e].ply=t[e].ply}catch(t){nt.new()}},save:function(){localStorage.zhenxing=H()(et)},fight:function(t,e){tt.hp()<=0||$.start({left:[et[0].u,et[1].u,et[2].u],right:t,plySide:1},e)}},it={zhenxing:et,zxCtrl:nt},rt=K.default.gtime,at=w.default.role,ot=it.zxCtrl,st=n("uXnN").default.dft,lt={start:function(){var t=n("5yrw").default.mapView,e=n("aNJt").default.mapCtrl;lt.new(),e.genMapArea(25,25,15),at.side(st.plySide),t.setWorldViewCenter(25,25),e.capturePosBySide(25,25,st.plySide),e.setBlockType(25,25,1),e.build(25,25,1,1,0)},new:function(){rt.new(),at.new(),ot.new()},load:function(){rt.load(),at.load(),ot.load()},mounted:function(){var t=n("5yrw").default.mapView;t.createEl(),t.render()}},dt={c:lt},ut=n("B3SJ").default.gT,ct=n("B3SJ").default.gtime;var ft={name:"bottomBar",data:function(){return{time:ut}},computed:{},methods:{addMonth:function(){ct.addMonth(1)}}},pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottomBar"},[e("button",{staticClass:"turn",on:{click:this.addMonth}},[this._v("下一个月")])])},staticRenderFns:[]};var vt=n("VU/8")(ft,pt,!1,function(t){n("iyHj")},"data-v-3f621125",null).exports,ht={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sce"},[n("div",{attrs:{id:"world"}}),t._v(" "),n("div",{attrs:{id:"block"}}),t._v(" "),n("div",{staticClass:"mengban",attrs:{id:"mengban"}}),t._v(" "),n("div",{staticClass:"psel",attrs:{id:"sel"}}),t._v(" "),n("div",{staticClass:"mapInfo",attrs:{id:"mapInfo"}}),t._v(" "),n("div",{staticClass:"blockInfo",attrs:{id:"blockInfo"}}),t._v(" "),n("div",{staticClass:"mapAct",attrs:{id:"mapAct"}}),t._v(" "),n("div",{staticClass:"build",attrs:{id:"buildUI"}},[n("div",{staticClass:"title",attrs:{id:"assignTitle"}}),t._v(" "),n("div",{attrs:{id:"choiceArea"}}),t._v(" "),n("button",{staticClass:"close",attrs:{id:"closeAssign"}},[t._v("关闭")])])])}]};var yt=n("VU/8")({name:"scene"},ht,!1,function(t){n("A4+F")},null,null).exports,mt=dt.c,gt=w.default.role,kt=it.zxCtrl,_t=n("iPAz").default.propList,wt={name:"gameView",data:function(){return{ply:gt,prop:_t}},computed:{gold:function(){return this.fmat(gt.gold())},wood:function(){return this.fmat(gt.wood())},iron:function(){return this.fmat(gt.iron())},food:function(){return this.fmat(gt.food())},stone:function(){return this.fmat(gt.stone())},pop:function(){return this.fmat(gt.pop())},idle:function(){return this.fmat(gt.idle_pop())},block:function(){return this.fmat(gt.block())},maxBlock:function(){return this.fmat(gt.maxBlock())}},components:{fightPnl:M,wpDesc:J,tiv:X,bottomBar:vt,plyPnl:N,scene:yt},created:function(){mt.start()},mounted:function(){mt.mounted()},methods:{meter:function(){},fmat:function(t){return t>=1e5?Math.floor(t/1e4)+"万":t},test:function(){gt.bagAddItem(0),gt.bagAddItem(1)},fight:function(){var t=new _.Npc(100,0),e=new _.Npc(101,0),n=new _.Npc(102,0);kt.fight([t,n,e])},newGame:function(){mt.new()},equipWp1:function(){b.default.Fight.showRecord()},equipWp2:function(){w.default.ui.pnl||(w.default.ui.pnl=!0)},test1:function(){console.log(gt.atk())}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mlBoard nosel"},[n("div",{staticClass:"topBar"},[n("tiv",{staticClass:"left"}),t._v(" "),n("div",{staticClass:"res"},[n("div",{staticClass:"cell"},[t._v("木材："+t._s(t.wood))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("石头："+t._s(t.stone))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("铁矿："+t._s(t.iron))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("粮食："+t._s(t.food))])]),t._v(" "),n("div",{staticClass:"rightRes"},[n("div",{staticClass:"cell"},[t._v("金币："+t._s(t.gold))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("空闲："+t._s(t.idle))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("人口："+t._s(t.pop))]),t._v(" "),n("div",{staticClass:"cell"},[t._v("地块："+t._s(t.block)+"/"+t._s(t.maxBlock))])])],1),t._v(" "),n("fightPnl"),t._v(" "),n("plyPnl"),t._v(" "),n("scene"),t._v(" "),t.wpDesc?n("wpDesc",{on:{clsWp:t.clsWp}}):t._e(),t._v(" "),n("div",{staticClass:"infoBox",attrs:{id:"info"}}),t._v(" "),n("bottomBar"),t._v(" "),n("div",{staticClass:"tool"},[n("button",{staticClass:"right",on:{click:t.test}},[t._v("添加物品")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.fight}},[t._v("战斗")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.newGame}},[t._v("新游戏")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.equipWp1}},[t._v("显示战斗记录")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.equipWp2}},[t._v("人物")]),t._v(" "),n("button",{staticClass:"right",on:{click:t.test1}},[t._v("测试")])])],1)},staticRenderFns:[]};var xt={name:"magicLand",components:{gameView:n("VU/8")(wt,bt,!1,function(t){n("n4Ry")},"data-v-003da084",null).exports},data:function(){return{title:"苦逼屠龙记"}},computed:{desc:function(){return"苦逼屠龙记是老徐在小破站上做的第一个游戏（游戏仍然在开发中，目前不具备可玩性）"}},created:function(){document.title="苦逼屠龙记"}},Bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bak"},[n("div",{staticClass:"title"},[n("h3",[t._v(t._s(t.title))]),t._v(" "),n("p",{staticClass:"d"},[t._v(t._s(t.desc))])]),t._v(" "),n("br"),t._v(" "),n("div",[n("gameView")],1)])},staticRenderFns:[]};var Ct=n("VU/8")(xt,Bt,!1,function(t){n("z8LR")},"data-v-944d4aa2",null);e.default=Ct.exports},uXnN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={dft:{plySide:1,res:{side:1,wood:100,gold:100,food:100,stone:100,iron:100}}}},uqUo:function(t,e,n){var i=n("kM2E"),r=n("FeBl"),a=n("S82l");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},"vFc/":function(t,e,n){var i=n("TcQ7"),r=n("QRG4"),a=n("fkB2");t.exports=function(t){return function(e,n,o){var s,l=i(e),d=r(l.length),u=a(o,d);if(t&&n!=n){for(;d>u;)if((s=l[u++])!=s)return!0}else for(;d>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},"vIB/":function(t,e,n){"use strict";var i=n("O4g8"),r=n("kM2E"),a=n("880/"),o=n("hJx8"),s=n("/bQp"),l=n("94VQ"),d=n("e6n0"),u=n("PzxK"),c=n("dSzd")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,h,y,m){l(n,e,v);var g,k,_,w=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",x="values"==h,B=!1,C=t.prototype,S=C[c]||C["@@iterator"]||h&&C[h],M=S||w(h),E=h?x?w("entries"):M:void 0,P="Array"==e&&C.entries||S;if(P&&(_=u(P.call(new t)))!==Object.prototype&&_.next&&(d(_,b,!0),i||"function"==typeof _[c]||o(_,c,p)),x&&S&&"values"!==S.name&&(B=!0,M=function(){return S.call(this)}),i&&!m||!f&&!B&&C[c]||o(C,c,M),s[e]=M,s[b]=p,h)if(g={values:x?M:w("values"),keys:y?M:w("keys"),entries:E},m)for(k in g)k in C||a(C,k,g[k]);else r(r.P+r.F*(f||B),e,g);return g}},wFRd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PKMK"),r=n("XIw1"),a=i.default.FSKL,o=i.default.FSC,s=r.a.fightRecord,l=i.default.EFF,d=[];d[1]=[],d[2]=[];var u={log:""},c={showPnl:{v:!1},showClose:{v:!1},over:!0,start:function(t,e){c.over&&(c.init(t,e),c.beforeRound(),c.roundStart(),c.roundOver())},init:function(t,e){u={log:""},c.callback=void 0==e?void 0:e,c.callBackParam=0,c.round=1,c.over=!1,c.plySide=t.plySide,c.winSide=1,p(1,t.left),p(2,t.right)},beforeRound:function(){var t;for(v();0!=(t=S());)_(t)},roundStart:function(){for(;c.round<=10&&(f("\n---- 第 "+c.round+" 回合开始 ----\n"),c.round++,v(),c.over=c.ARound(),!c.over););},roundOver:function(){var t;f("\n---- 战斗结束 ----");for(var e=1;e<=2;e++)for(var n=0;n<3;n++)0!=(t=d[e][n].u)&&(t.ftInit(),t.ft.round=0,t.ft.eff=[]);s.log=u.log,c.callback&&c.callback()},ARound:function(){for(var t;;){if(0==(t=S()))return!1;if(1==m(t))return!0}return!1},closeUI:function(){c.showPnl.v=!1},showRecord:function(){c.showPnl.v=!0,c.showClose.v=!0}};function f(t){""!=t&&(u.log=u.log+t+"\n")}function p(t,e){for(var n,i,r=0;r<3;r++)d[t][r]={},d[t][r].u=e[r],1==t?(n=-1*r+3,i=2):(n=r+4,i=1),d[t][r].pos=n,d[t][r].done=!1,0!=d[t][r].u&&(d[t][r].u.side=t,d[t][r].u.t=i,d[t][r].u.idx=r,d[t][r].u.ftOn=!0,d[t][r].u.ftInit(),d[t][r].u.ft.round=0,d[t][r].u.ft.eff=[])}function v(){for(var t,e=1;e<=2;e++)for(var n=0;n<3;n++)t=d[e][n].u,d[e][n].done=!1,0!=t&&t.hp()>0&&b(t)}function h(){return 0==y(1)?(c.winSide=2,1):0==y(2)?(c.winSide=1,1):0}function y(t){var e,n=0,i=0;for(n=0;n<3;n++)if(0!=(e=d[t][n].u)&&e.hp()>0){i++;break}return i}function m(t){var e;if(1==function(t){var e,n,i,r,o,s=t.fskl(),l=s.length;if(!(l>0))return 0;for(var d=0;d<l;d++)if((o=s[d])>=0&&(e=t.attr.zf[o].id,1==a[e].type&&(n=t.attr.zf[o].lv,i=a[e].probAdd,r=a[e].prob+(n-1)*i,Math.random()<=r&&1==g(t,e,n))))return 1}(t))return!0;if(0!=(e=function(t){var e=t.atkDis();return function(t,e){for(var n,i,r=0,a=t.side,o=t.idx,s=d[a][o].pos,l=t.t,u=[],c=0;c<3;c++)n=d[l][c].u,i=d[l][c].pos,0!=n&&n.hp()>0&&e>=Math.abs(s-i)&&u.push(n);if(u.length>0){var o=Math.floor(Math.random()*u.length);r=u[o]}return r}(t,e)}(t))){if(1==function(t,e){f("【"+t.name()+"】普通攻击");var n=t.atk();n=function(t,e){return e}(0,n);var i=e.def();(n=Math.ceil(n*(150/(150+i))))>0&&(e.ft.t=e,e.damage(n)),f("  【"+e.name()+"】受到"+n+"伤害("+e.hp()+")"),e.hp()<=0&&f("  【"+e.name()+"】被击倒");return h()}(t,e))return!0}else f("【"+t.name()+"】攻击距离内没有目标"),function(t){f("  【"+t.name()+"】移动");var e=t.side,n=t.idx,i=d[e][n].pos;1==e?i++:i--;d[e][n].pos=i}(t);return!1}function g(t,e,n){if((r=C(t,a[e].range,1,a[e].target).length)>0){f("【"+t.name()+"】 发动 ["+a[e].name+"] !!");for(var i=JSON.parse(a[e].eff),r=i.length,o=0;o<r;o++)if(1==k(t,i[o],n,e))return 1}return 0}function k(t,e,n,i){var r,s,l,d,u=o[e].range,c=o[e].targetNum,p=o[e].target,v=o[e].src,y=o[e].basic,m=o[e].add,g=Math.ceil(t.getCal(v)*(y+(n-1)*m)),k=o[e].numType,_=C(t,u,c,p),b=_.length;if(!(b>0))return 0;for(var x=0;x<b;x++){r=_[x],0==g||1!=a[i].type&&3!=a[i].type||(s=0==k?r.def():r.mtk(),l=g,1!=p&&3!=p&&(l=Math.ceil(l*(150/(150+s)))),r.damage(l),f("  【"+r.name()+"】受到"+l+"伤害("+r.hp()+")"),r.hp()<=0&&f("  【"+r.name()+"】被击倒")),d=JSON.parse(o[e].eff);for(var B=0;B<d.length;B++)w(r,d[B],n,t);if(1==h())return 1}}function _(t){var e,n,i=t.fskl(),r=i.length;if(r>0)for(var o=0;o<r;o++)(n=i[o])>=0&&(e=t.attr.zf[n].id)>=0&&0==a[e].type&&g(t,e,t.attr.zf[n].lv)}function w(t,e,n,i){t.ft.eff.push({id:e,lv:n,round:c.round,from:i}),x(t),t.attrCheck()}function b(t){var e,n,i,r=0;if(t.ft.eff.length>0)for(;!(r>=t.ft.eff.length);)e=(n=t.ft.eff[r]).id,i=n.round,c.round-i>l[e].round&&B(t,e,r),r++}function x(t){var e,n,i,r,a,o,s,d,u,c=t.ft.eff,f=c.length,p=0;for(t.ftInit(),p=0;p<f;p++)c[p].id,e=c[p].lv,n=l[p].attr,a=l[p].source,i=l[p].base,r=l[p].psrc,o=l[p].badd,s=l[p].padd,d=t.getCal(a)||1,u=Math.ceil(i+(e-1)*o+d*(r+(e-1)*s)),t.ft[n]=t.ft[n]+u}function B(t,e,n){f("【"+t.name()+"】 来自 【"+t.ft.eff[n].from.name()+"】 的 【"+l[t.ft.eff[n].id].name+" 】 效果消失了"),t.ft.eff.splice(n,1),x(t),t.attrCheck()}function C(t,e,n,i){var r=[];if(0==i)return r.push(t),r;if(1==i||2==i){for(var a,o,s=t.idx,l=d[t.side][s].pos,u=2==i?t.t:t.side,c=0;c<3;c++)a=d[u][c].u,o=d[u][c].pos,0!=a&&a.hp()>0&&e>=Math.abs(l-o)&&r.push(a);for(;r.length>n;)s=Math.floor(Math.random()*r.length),r=r.splice(s,1);return r}return 0!=t.ft.t?(r.push(t.ft.t),r):void 0}function S(){for(var t,e=0,n=-1,i=1;i<=2;i++)for(var r=0;r<3;r++)0!=(t=d[i][r].u)&&0==d[i][r].done&&t.hp()>0&&t.spd()>n&&(e=t,n=t.spd());return 0!=e&&(d[e.side][e.idx].done=!0),e}e.default={Fight:c}},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("C4MV"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},xGkn:function(t,e,n){"use strict";var i=n("4mcu"),r=n("EGZi"),a=n("/bQp"),o=n("TcQ7");t.exports=n("vIB/")(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},xnc9:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},z8LR:function(t,e){},zQR9:function(t,e,n){"use strict";var i=n("h65t")(!0);n("vIB/")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},zwoO:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("pFYg"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}}});
//# sourceMappingURL=0.f3b0d8b0ed03be16033a.js.map